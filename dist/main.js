(()=>{"use strict";var e={d:(a,o)=>{for(var t in o)e.o(o,t)&&!e.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:o[t]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};e.d({},{c:()=>t});const a=e=>{let a=0;return{hit:function(){a+=1},isSunk:function(){return e<=a},length:e,getHits:()=>a}},o=e=>({type:e,gameboard:(e=>{const a=function(){const e=[];for(let a=0;a<=9;a++){e[a]=[];for(let o=0;o<=9;o++)e[a][o]=""}return e}(),o=[];function t(e){return!(e<0||e>9)}function r(){let a=0;for(let e of o)!0===e.isSunk&&a++;if(console.log(a),a>=10)return(e=>{const a=document.querySelector(".modal"),o=document.querySelector(".overlay");return document.querySelector(".btn").addEventListener("click",(()=>{a.classList.add("hidden"),o.classList.add("hidden"),location.reload()})),{openModal:function(){document.querySelector(".win").textContent=`${e} lost!`,a.classList.remove("hidden"),o.classList.remove("hidden")}}})(`${e}`).openModal(),console.log(`${e} lose`),!0}return{gameboard:a,placeShip:function(e,r,n,d){if(!t(e)||!t(r)||""!==a[e][r])return console.log("Index out of board");if("vertical"===d&&t(e+n.length-1))for(let t=e;t<e+n.length;t++){if(""!==a[t][r])return console.log("Invalid spot");a[t][r]={type:`${n.length}ship`,ship:n,value:"O",isSunk:!1},o.push(a[t][r])}if("horizontal"===d&&t(r+n.length-1))for(let t=r;t<r+n.length;t++){if(""!==a[e][t])return console.log("Invalid spot");a[e][t]={type:`${n.length}ship`,ship:n,value:"O",isSunk:!1},o.push(a[e][t])}return a},receiveAttack:function(e,o){if(!t(e)||!t(o)||!0===r())return console.log("Attack out of board");{let t=a[e][o];if("●"===t)return;""===t?(a[e][o]="●",console.log("Miss")):"O"===t.value&&(t.ship.hit(),t.value="X",t.ship.isSunk()&&(t.isSunk=!0,console.log("Sunk")),console.log(t.isSunk),r())}},checkEndGame:r}})(e)});let t;document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".gameboard-one"),r=document.querySelector(".gameboard-two"),n=o("You"),d=o("Computer"),l=a(4),i=a(3),c=a(3),m=a(2),g=a(2),s=a(2),b=a(1),p=a(1),u=a(1),h=a(1);n.gameboard.placeShip(0,0,l,"horizontal"),n.gameboard.placeShip(9,6,i,"horizontal"),n.gameboard.placeShip(0,9,c,"vertical"),n.gameboard.placeShip(8,0,m,"horizontal"),n.gameboard.placeShip(5,4,g,"vertical"),n.gameboard.placeShip(2,6,s,"horizontal"),n.gameboard.placeShip(8,4,b,"horizontal"),n.gameboard.placeShip(2,2,p,"horizontal"),n.gameboard.placeShip(6,8,u,"horizontal"),n.gameboard.placeShip(5,0,h,"horizontal"),d.gameboard.placeShip(0,0,l,"horizontal"),d.gameboard.placeShip(9,6,i,"horizontal"),d.gameboard.placeShip(0,9,c,"vertical"),d.gameboard.placeShip(8,0,m,"horizontal"),d.gameboard.placeShip(5,4,g,"vertical"),d.gameboard.placeShip(2,6,s,"horizontal"),d.gameboard.placeShip(8,4,b,"horizontal"),d.gameboard.placeShip(2,2,p,"horizontal"),d.gameboard.placeShip(7,8,u,"horizontal"),d.gameboard.placeShip(5,0,h,"horizontal"),t=function(e,a){const o=document.createElement("div");function t(){o.textContent="";for(let a=0;a<e.gameboard.gameboard.length;a++)for(let t=0;t<e.gameboard.gameboard[a].length;t++){const r=document.createElement("div");"object"==typeof e.gameboard.gameboard[a][t]?(e.gameboard.gameboard[a][t].value="O")&&(r.innerHTML=e.gameboard.gameboard[a][t].value,r.classList.add("black")):"X"===e.gameboard.gameboard[a][t]?(r.innerHTML=e.gameboard.gameboard[a][t],r.classList.add("orange")):r.innerHTML=e.gameboard.gameboard[a][t],o.appendChild(r)}a.append(o)}return o.classList.add("container"),{render:t,attack:function a(o=0){if(o>=99)return void console.log("Maximum attempts reached. Exiting attack function.");let r=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());if("●"!==e.gameboard.gameboard[r][n]&&"X"!==e.gameboard.gameboard[r][n].value&&"X"!==e.gameboard.gameboard[r][n])return e.gameboard.receiveAttack(r,n),"object"==typeof e.gameboard.gameboard[r][n]?(e.gameboard.gameboard[r][n]=e.gameboard.gameboard[r][n].value,setTimeout(a,1e3),void t()):void t();a(o+1)}}}(n,e),function(e,a){const o=document.createElement("div");o.classList.add("container");for(let a=0;a<e.gameboard.gameboard.length;a++)for(let r=0;r<e.gameboard.gameboard[a].length;r++){const n=document.createElement("div");o.appendChild(n),n.addEventListener("click",(()=>{e.gameboard.receiveAttack([a],[r]),"object"==typeof e.gameboard.gameboard[a][r]?(n.innerHTML=e.gameboard.gameboard[a][r].value,n.classList.add("orange")):(n.innerHTML=e.gameboard.gameboard[a][r],setTimeout(t.attack,1e3),t.render())}))}a.append(o)}(d,r),t.render()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvVUkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zaGlwLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyBwbGF5ZXJHYW1lYm9hcmQgfSBmcm9tIFwiLlwiO1xyXG5cclxuLy9OZWVkIHRvIHdyaXRlIGVuZCBnYW1lIG1hc3NhZ2UsIHN0b3AgcG9zc2liaWxpdHkgb2YgY2xpY2tzIGlmIGVuZEdhbWVcclxuXHJcbmZ1bmN0aW9uIHJlbmRlclBsYXllckdhbWVib2FyZChwbGF5ZXIsIGJveCkge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyJylcclxuICAgIGZ1bmN0aW9uIHJlbmRlcigpIHsgICBcclxuICAgICAgICBjb250YWluZXIudGV4dENvbnRlbnQgPSAnJzsgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZihwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXSkgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal0udmFsdWUgPSAnTycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXJlLmlubmVySFRNTCA9IHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldW2pdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgnYmxhY2snKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldW2pdID09PSBcIlhcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlLmlubmVySFRNTCA9IHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldW2pdOyBcclxuICAgICAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgnb3JhbmdlJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZS5pbm5lckhUTUwgPSBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcXVhcmUpO1xyXG4gICAgICAgICAgICB9ICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJveC5hcHBlbmQoY29udGFpbmVyKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IE1BWF9BVFRFTVBUUyA9IDk5O1xyXG5cclxuICAgIGZ1bmN0aW9uIGF0dGFjayhhdHRlbXB0ID0gMCkge1xyXG4gICAgICAgIGlmIChhdHRlbXB0ID49IE1BWF9BVFRFTVBUUykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk1heGltdW0gYXR0ZW1wdHMgcmVhY2hlZC4gRXhpdGluZyBhdHRhY2sgZnVuY3Rpb24uXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBjb2xSYW5kb20gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XHJcbiAgICAgICAgbGV0IHJvd1JhbmRvbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcclxuICAgIFxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbY29sUmFuZG9tXVtyb3dSYW5kb21dICE9PSAnXFx1MjVDRicgJiZcclxuICAgICAgICAgICAgcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbY29sUmFuZG9tXVtyb3dSYW5kb21dLnZhbHVlICE9PSAnWCcgJiZcclxuICAgICAgICAgICAgcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbY29sUmFuZG9tXVtyb3dSYW5kb21dICE9PSAnWCdcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcGxheWVyLmdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKGNvbFJhbmRvbSwgcm93UmFuZG9tKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtjb2xSYW5kb21dW3Jvd1JhbmRvbV0gPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtjb2xSYW5kb21dW3Jvd1JhbmRvbV0gPSBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtjb2xSYW5kb21dW3Jvd1JhbmRvbV0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGF0dGFjaywxMDAwKVxyXG4gICAgICAgICAgICAgICAgcmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGF0dGFjayhhdHRlbXB0ICsgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlbmRlcixcclxuICAgICAgICBhdHRhY2tcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ29tcEdhbWVib2FyZCAocGxheWVyLCBib3gpIHtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NvbnRhaW5lcicpXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNxdWFyZSk7XHJcbiAgICAgICAgICAgIHNxdWFyZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhbaV0sW2pdKVxyXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mKHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldW2pdKSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcXVhcmUuaW5uZXJIVE1MID0gcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoJ29yYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzcXVhcmUuaW5uZXJIVE1MID0gcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal07XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChwbGF5ZXJHYW1lYm9hcmQuYXR0YWNrLDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllckdhbWVib2FyZC5yZW5kZXIoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGJveC5hcHBlbmQoY29udGFpbmVyKTtcclxufVxyXG5cclxuY29uc3QgbW9kYWwgPSAobG9zZXIpID0+IHtcclxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcclxuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIik7XHJcbiAgICBjb25zdCBuZXdHYW1lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG5cIik7XHJcbiAgICBuZXdHYW1lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGNsb3NlTW9kYWwoKVxyXG4gICAgfSlcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gb3Blbk1vZGFsKCkge1xyXG4gICAgICAgIGNvbnN0IHdpbk1hc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2luJyk7XHJcbiAgICAgICAgd2luTWFzc2FnZS50ZXh0Q29udGVudCA9IGAke2xvc2VyfSBsb3N0IWBcclxuICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XHJcbiAgICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtvcGVuTW9kYWx9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCB7XHJcbiAgICByZW5kZXJQbGF5ZXJHYW1lYm9hcmQsXHJcbiAgICByZW5kZXJDb21wR2FtZWJvYXJkLFxyXG4gICAgbW9kYWxcclxufSIsImNvbnN0IFNoaXAgPSAoc2hpcExlbmd0aCkgPT4ge1xuICBjb25zdCBsZW5ndGggPSBzaGlwTGVuZ3RoO1xuICBsZXQgaGl0cyA9IDA7XG5cbiAgZnVuY3Rpb24gaGl0KCkge1xuICAgIGhpdHMgKz0gMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzU3VuaygpIHtcbiAgICBpZiAoc2hpcExlbmd0aCA8PSBoaXRzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBoaXQsXG4gICAgaXNTdW5rLFxuICAgIGxlbmd0aCxcbiAgICBnZXRIaXRzOiAoKSA9PiBoaXRzLFxuICB9O1xufTtcblxuZXhwb3J0IHsgU2hpcCB9O1xuIiwiaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCJcclxuXHJcbmNvbnN0IFBsYXllciA9IChwbGF5ZXJ0eXBlKSA9PiB7XHJcbiAgICBjb25zdCB0eXBlID0gcGxheWVydHlwZTtcclxuXHJcbiAgICBjb25zdCBnYW1lYm9hcmQgPSBHYW1lYm9hcmQocGxheWVydHlwZSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGdhbWVib2FyZFxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge1BsYXllcn1cclxuIiwiaW1wb3J0IHsgU2hpcCB9IGZyb20gXCIuL3NoaXBcIjtcbmltcG9ydCB7IG1vZGFsIH0gZnJvbSBcIi4vVUlcIjtcblxuY29uc3QgR2FtZWJvYXJkID0gKHBsYXllcikgPT4ge1xuICBmdW5jdGlvbiBjcmVhdGVHYW1lQm9hcmQoKSB7XG4gICAgY29uc3QgZ2FtZUJvYXJkID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gOTsgaSsrKSB7XG4gICAgICBnYW1lQm9hcmRbaV0gPSBbXTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDw9IDk7IGorKykge1xuICAgICAgICBnYW1lQm9hcmRbaV1bal0gPSBcIlwiO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZUJvYXJkO1xuICB9XG5cbiAgY29uc3QgZ2FtZWJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKCk7XG4gIGNvbnN0IHNoaXBzID0gW107XG5cbiAgZnVuY3Rpb24gX2lzV2l0aGluQm91bmRzKGluZGV4KSB7XG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+IDkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLy9zdGFydCBhbmQgZW5kIGhlcmUgLSBpbmRleGVzIG9mIHRoZSBib3JkJ3MgY2VsbHMgd2hlcmUgaSB3YW50IHRvIHBsYWNlIHNoaXBcbiAgLy8gdGhlIGNvb3JkaW5hdGUgb2JqZWN0IHNob3VsZCBoYXZlIGEgcmVmZXJlbmNlIHRvIHRoZSBzaGlwIGluIGl0cyBsb2NhdGlvbi5cbiAgZnVuY3Rpb24gcGxhY2VTaGlwKGNvbCwgcm93LCBzaGlwLCBkaXJlY3Rpb24pIHtcbiAgICBpZiAoXG4gICAgICBfaXNXaXRoaW5Cb3VuZHMoY29sKSAmJlxuICAgICAgX2lzV2l0aGluQm91bmRzKHJvdykgJiZcbiAgICAgIGdhbWVib2FyZFtjb2xdW3Jvd10gPT09IFwiXCJcbiAgICApIHtcbiAgICAgIGlmIChkaXJlY3Rpb24gPT09IFwidmVydGljYWxcIiAmJiBfaXNXaXRoaW5Cb3VuZHMoY29sICsgc2hpcC5sZW5ndGggLSAxKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gY29sOyBpIDwgY29sICsgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChnYW1lYm9hcmRbaV1bcm93XSA9PT0gXCJcIikge1xuICAgICAgICAgICAgZ2FtZWJvYXJkW2ldW3Jvd10gPSB7XG4gICAgICAgICAgICAgIHR5cGU6IGAke3NoaXAubGVuZ3RofXNoaXBgLFxuICAgICAgICAgICAgICBzaGlwOiBzaGlwLFxuICAgICAgICAgICAgICB2YWx1ZTogXCJPXCIsXG4gICAgICAgICAgICAgIGlzU3VuazogZmFsc2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2hpcHMucHVzaChnYW1lYm9hcmRbaV1bcm93XSk7XG4gICAgICAgICAgfSBlbHNlIHJldHVybiBjb25zb2xlLmxvZyhcIkludmFsaWQgc3BvdFwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGRpcmVjdGlvbiA9PT0gXCJob3Jpem9udGFsXCIgJiZcbiAgICAgICAgX2lzV2l0aGluQm91bmRzKHJvdyArIHNoaXAubGVuZ3RoIC0gMSlcbiAgICAgICkge1xuICAgICAgICBmb3IgKGxldCBpID0gcm93OyBpIDwgcm93ICsgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChnYW1lYm9hcmRbY29sXVtpXSA9PT0gXCJcIikge1xuICAgICAgICAgICAgZ2FtZWJvYXJkW2NvbF1baV0gPSB7XG4gICAgICAgICAgICAgIHR5cGU6IGAke3NoaXAubGVuZ3RofXNoaXBgLFxuICAgICAgICAgICAgICBzaGlwOiBzaGlwLFxuICAgICAgICAgICAgICB2YWx1ZTogXCJPXCIsXG4gICAgICAgICAgICAgIGlzU3VuazogZmFsc2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2hpcHMucHVzaChnYW1lYm9hcmRbY29sXVtpXSk7XG4gICAgICAgICAgfSBlbHNlIHJldHVybiBjb25zb2xlLmxvZyhcIkludmFsaWQgc3BvdFwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29uc29sZS5sb2coXCJJbmRleCBvdXQgb2YgYm9hcmRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdhbWVib2FyZDtcbiAgfVxuICBcblxuICAvL0N1cnJlbnRseSB0ZXN0aW5nIHRoaXMgaW4gaW5kZXguanNcbiAgZnVuY3Rpb24gcmVjZWl2ZUF0dGFjayhjb2wsIHJvdykge1xuICAgIGlmIChfaXNXaXRoaW5Cb3VuZHMoY29sKSAmJiBfaXNXaXRoaW5Cb3VuZHMocm93KSYmY2hlY2tFbmRHYW1lKCkgIT09IHRydWUpIHtcbiAgICAgIGxldCBib2FyZENlbGwgPSBnYW1lYm9hcmRbY29sXVtyb3ddO1xuICAgICAgaWYgKGJvYXJkQ2VsbCA9PT0gJ1xcdTI1Q0YnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSBpZiAoYm9hcmRDZWxsID09PSBcIlwiKSB7XG4gICAgICAgIGdhbWVib2FyZFtjb2xdW3Jvd10gPSAnXFx1MjVDRic7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc1wiKTtcbiAgICAgIH0gZWxzZSBpZiAoYm9hcmRDZWxsLnZhbHVlID09PSBcIk9cIikge1xuICAgICAgICBib2FyZENlbGwuc2hpcC5oaXQoKTtcbiAgICAgICAgYm9hcmRDZWxsLnZhbHVlID0gXCJYXCI7XG4gICAgICAgIGlmIChib2FyZENlbGwuc2hpcC5pc1N1bmsoKSkge1xuICAgICAgICAgIGJvYXJkQ2VsbC5pc1N1bmsgPSB0cnVlO1xuICAgICAgICAgIC8vIF9tYXJrQ2VsbHNBcm91bmRTdWNjc2Vzc2Z1bGxIaXQoY29sLCByb3cpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3Vua1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhib2FyZENlbGwuaXNTdW5rKTtcbiAgICAgICAgY2hlY2tFbmRHYW1lKClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKFwiQXR0YWNrIG91dCBvZiBib2FyZFwiKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfbWFya0NlbGxzQXJvdW5kU3VjY3Nlc3NmdWxsSGl0KGNvbCwgcm93KSB7XG4gICAgY29uc3QgbmVpZ2hib3VycyA9IFtcbiAgICAgIGdhbWVib2FyZFtjb2wgKyAxXT8uW3Jvd10sXG4gICAgICBnYW1lYm9hcmRbY29sIC0gMV0/Lltyb3ddLFxuICAgICAgZ2FtZWJvYXJkW2NvbF0/Lltyb3cgKyAxXSxcbiAgICAgIGdhbWVib2FyZFtjb2xdPy5bcm93IC0gMV0sXG4gICAgICBnYW1lYm9hcmRbY29sICsgMV0/Lltyb3cgKyAxXSxcbiAgICAgIGdhbWVib2FyZFtjb2wgLSAxXT8uW3JvdyAtIDFdLFxuICAgICAgZ2FtZWJvYXJkW2NvbCAtIDFdPy5bcm93ICsgMV0sXG4gICAgICBnYW1lYm9hcmRbY29sICsgMV0/Lltyb3cgLSAxXSxcbiAgICBdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIG5laWdoYm91cnNbaV0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBuZWlnaGJvdXJzW2ldLnZhbHVlICE9PSBcIk9cIiAmJlxuICAgICAgICBuZWlnaGJvdXJzW2ldLnZhbHVlICE9PSBcIlhcIlxuICAgICAgKSB7XG4gICAgICAgIG5laWdoYm91cnNbaV0gPSAnXFx1MjVDRic7XG4gICAgICAgIC8vIFVwZGF0ZSBjb3JyZXNwb25kaW5nIHZhbHVlIGluIGdhbWVib2FyZCBhcnJheVxuICAgICAgICBzd2l0Y2ggKGkpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sICsgMV1bcm93XSA9ICdcXHUyNUNGJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgLSAxXVtyb3ddID0gJ1xcdTI1Q0YnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgZ2FtZWJvYXJkW2NvbF1bcm93ICsgMV0gPSAnXFx1MjVDRic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sXVtyb3cgLSAxXSA9ICdcXHUyNUNGJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgKyAxXVtyb3cgKyAxXSA9ICdcXHUyNUNGJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgLSAxXVtyb3cgLSAxXSA9ICdcXHUyNUNGJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgLSAxXVtyb3cgKyAxXSA9ICdcXHUyNUNGJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgKyAxXVtyb3cgLSAxXSA9ICdcXHUyNUNGJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrRW5kR2FtZSgpIHtcbiAgICBsZXQgY291bnRlciA9IDA7XG4gICAgZm9yIChsZXQgc2hpcCBvZiBzaGlwcykge1xuICAgICAgaWYgKHNoaXAuaXNTdW5rID09PSB0cnVlKSB7XG4gICAgICAgIGNvdW50ZXIrKztcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coY291bnRlcik7XG4gICAgaWYgKGNvdW50ZXIgPj0gMTApIHtcbiAgICAgIGxldCBuZXdzPSBtb2RhbChgJHtwbGF5ZXJ9YCk7XG4gICAgICBuZXdzLm9wZW5Nb2RhbCgpXG4gICAgICBjb25zb2xlLmxvZyhgJHtwbGF5ZXJ9IGxvc2VgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2FtZWJvYXJkLFxuICAgIHBsYWNlU2hpcCxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIGNoZWNrRW5kR2FtZSxcbiAgfTtcbn07XG5cbmV4cG9ydCB7IEdhbWVib2FyZCB9O1xuIiwiaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vcGxheWVyXCI7XG5pbXBvcnQgeyByZW5kZXJQbGF5ZXJHYW1lYm9hcmQsIHJlbmRlckNvbXBHYW1lYm9hcmQgfSBmcm9tIFwiLi9VSVwiO1xuXG5sZXQgcGxheWVyR2FtZWJvYXJkXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgIFxuICAgIGNvbnN0IHBsYXllckJvYXJkQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWVib2FyZC1vbmUnKTtcbiAgICBjb25zdCBjb21wdXRlckJvYXJkQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWVib2FyZC10d28nKTtcblxuICAgIGNvbnN0IHJlYWxQbGF5ZXIgPSBQbGF5ZXIoJ1lvdScpO1xuICAgIGNvbnN0IGNvbXBQbGF5ZXIgPSBQbGF5ZXIoJ0NvbXB1dGVyJyk7XG5cbiAgICBjb25zdCBmb3VyU2hpcCA9IFNoaXAoNClcbiAgICBjb25zdCB0aHJlZVNoaXBPbmUgPSBTaGlwKDMpO1xuICAgIGNvbnN0IHRocmVlU2hpcFR3byA9IFNoaXAoMyk7XG4gICAgY29uc3QgdHdvU2hpcE9uZSA9IFNoaXAoMik7XG4gICAgY29uc3QgdHdvU2hpcFR3byA9IFNoaXAoMik7XG4gICAgY29uc3QgdHdvU2hpcFRocmVlID0gU2hpcCgyKTtcbiAgICBjb25zdCBvbmVTaGlwT25lID0gU2hpcCgxKTtcbiAgICBjb25zdCBvbmVTaGlwVHdvID0gU2hpcCgxKTtcbiAgICBjb25zdCBvbmVTaGlwVGhyZWUgPSBTaGlwKDEpO1xuICAgIGNvbnN0IG9uZVNoaXBGb3VyID0gU2hpcCgxKTtcblxuXG4gICAgcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDAsMCwgZm91clNoaXAsICdob3Jpem9udGFsJyk7XG4gICAgcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDksNiwgdGhyZWVTaGlwT25lLCAnaG9yaXpvbnRhbCcpO1xuICAgIHJlYWxQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCgwLDksIHRocmVlU2hpcFR3bywgJ3ZlcnRpY2FsJyk7XG4gICAgcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDgsMCwgdHdvU2hpcE9uZSwgJ2hvcml6b250YWwnKTtcbiAgICByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoNSw0LCB0d29TaGlwVHdvLCAndmVydGljYWwnKTtcbiAgICByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoMiw2LCB0d29TaGlwVGhyZWUsICdob3Jpem9udGFsJyk7XG4gICAgcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDgsNCwgb25lU2hpcE9uZSwgJ2hvcml6b250YWwnKTtcbiAgICByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoMiwyLCBvbmVTaGlwVHdvLCAnaG9yaXpvbnRhbCcpO1xuICAgIHJlYWxQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg2LDgsIG9uZVNoaXBUaHJlZSwgJ2hvcml6b250YWwnKTtcbiAgICByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoNSwwLCBvbmVTaGlwRm91ciwgJ2hvcml6b250YWwnKTtcblxuICAgIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCgwLDAsIGZvdXJTaGlwLCAnaG9yaXpvbnRhbCcpO1xuICAgIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg5LDYsIHRocmVlU2hpcE9uZSwgJ2hvcml6b250YWwnKTtcbiAgICBjb21wUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoMCw5LCB0aHJlZVNoaXBUd28sICd2ZXJ0aWNhbCcpO1xuICAgIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg4LDAsIHR3b1NoaXBPbmUsICdob3Jpem9udGFsJyk7XG4gICAgY29tcFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDUsNCwgdHdvU2hpcFR3bywgJ3ZlcnRpY2FsJyk7XG4gICAgY29tcFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDIsNiwgdHdvU2hpcFRocmVlLCAnaG9yaXpvbnRhbCcpO1xuICAgIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg4LDQsIG9uZVNoaXBPbmUsICdob3Jpem9udGFsJyk7XG4gICAgY29tcFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDIsMiwgb25lU2hpcFR3bywgJ2hvcml6b250YWwnKTtcbiAgICBjb21wUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoNyw4LCBvbmVTaGlwVGhyZWUsICdob3Jpem9udGFsJyk7XG4gICAgY29tcFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDUsMCwgb25lU2hpcEZvdXIsICdob3Jpem9udGFsJyk7XG5cbiAgICBcbiAgICBwbGF5ZXJHYW1lYm9hcmQgPSByZW5kZXJQbGF5ZXJHYW1lYm9hcmQocmVhbFBsYXllciwgcGxheWVyQm9hcmRCb3gpO1xuICAgIHJlbmRlckNvbXBHYW1lYm9hcmQoY29tcFBsYXllciwgY29tcHV0ZXJCb2FyZEJveClcblxuICAgIHBsYXllckdhbWVib2FyZC5yZW5kZXIoKTtcbiAgICBcbn0pO1xuXG5leHBvcnQge3BsYXllckdhbWVib2FyZH1cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlNoaXAiLCJzaGlwTGVuZ3RoIiwiaGl0cyIsImhpdCIsImlzU3VuayIsImxlbmd0aCIsImdldEhpdHMiLCJQbGF5ZXIiLCJwbGF5ZXJ0eXBlIiwidHlwZSIsImdhbWVib2FyZCIsInBsYXllciIsImdhbWVCb2FyZCIsImkiLCJqIiwiY3JlYXRlR2FtZUJvYXJkIiwic2hpcHMiLCJfaXNXaXRoaW5Cb3VuZHMiLCJpbmRleCIsImNoZWNrRW5kR2FtZSIsImNvdW50ZXIiLCJzaGlwIiwiY29uc29sZSIsImxvZyIsImxvc2VyIiwibW9kYWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJvdmVybGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsImFkZCIsImxvY2F0aW9uIiwicmVsb2FkIiwib3Blbk1vZGFsIiwidGV4dENvbnRlbnQiLCJyZW1vdmUiLCJwbGFjZVNoaXAiLCJjb2wiLCJyb3ciLCJkaXJlY3Rpb24iLCJ2YWx1ZSIsInB1c2giLCJyZWNlaXZlQXR0YWNrIiwiYm9hcmRDZWxsIiwiR2FtZWJvYXJkIiwicGxheWVyR2FtZWJvYXJkIiwicGxheWVyQm9hcmRCb3giLCJjb21wdXRlckJvYXJkQm94IiwicmVhbFBsYXllciIsImNvbXBQbGF5ZXIiLCJmb3VyU2hpcCIsInRocmVlU2hpcE9uZSIsInRocmVlU2hpcFR3byIsInR3b1NoaXBPbmUiLCJ0d29TaGlwVHdvIiwidHdvU2hpcFRocmVlIiwib25lU2hpcE9uZSIsIm9uZVNoaXBUd28iLCJvbmVTaGlwVGhyZWUiLCJvbmVTaGlwRm91ciIsImJveCIsImNvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJyZW5kZXIiLCJzcXVhcmUiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsImFwcGVuZCIsImF0dGFjayIsImF0dGVtcHQiLCJjb2xSYW5kb20iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyb3dSYW5kb20iLCJzZXRUaW1lb3V0IiwicmVuZGVyUGxheWVyR2FtZWJvYXJkIiwicmVuZGVyQ29tcEdhbWVib2FyZCJdLCJzb3VyY2VSb290IjoiIn0=