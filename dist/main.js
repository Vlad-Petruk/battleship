(()=>{"use strict";const e=e=>{let a=0;return{hit:function(){a+=1},isSunk:function(){return e<=a},length:e,getHits:()=>a}},a=e=>({type:e,gameboard:(e=>{const a=function(){const e=[];for(let a=0;a<=9;a++){e[a]=[];for(let o=0;o<=9;o++)e[a][o]=""}return e}(),o=[];function t(e){return!(e<0||e>9)}function r(){let a=0;for(let e of o)!0===e.isSunk&&a++;if(console.log(a),a>=10)return(e=>{const a=document.querySelector(".modal"),o=document.querySelector(".overlay");return document.querySelector(".btn").addEventListener("click",(()=>{a.classList.add("hidden"),o.classList.add("hidden"),location.reload()})),{openModal:function(){document.querySelector(".win").textContent=`${e} lost!`,a.classList.remove("hidden"),o.classList.remove("hidden")}}})(`${e}`).openModal(),console.log(`${e} lose`),!0}return{gameboard:a,placeShip:function(e,r,n,d){if(!t(e)||!t(r)||""!==a[e][r])return console.log("Index out of board");if("vertical"===d&&t(e+n.length-1))for(let t=e;t<e+n.length;t++){if(""!==a[t][r])return console.log("Invalid spot");a[t][r]={type:`${n.length}ship`,ship:n,value:"O",isSunk:!1},o.push(a[t][r])}if("horizontal"===d&&t(r+n.length-1))for(let t=r;t<r+n.length;t++){if(""!==a[e][t])return console.log("Invalid spot");a[e][t]={type:`${n.length}ship`,ship:n,value:"O",isSunk:!1},o.push(a[e][t])}return a},receiveAttack:function(e,o){if(!t(e)||!t(o)||!0===r())return console.log("Attack out of board");{let t=a[e][o];if("●"===t)return;""===t?(a[e][o]="●",console.log("Miss")):"O"===t.value&&(t.ship.hit(),t.value="X",t.ship.isSunk()&&(t.isSunk=!0,console.log("Sunk")),console.log(t.isSunk),r())}},checkEndGame:r}})(e)});let o;document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector(".gameboard-one"),r=document.querySelector(".gameboard-two"),n=a("You"),d=a("Computer"),l=e(4),i=e(3),c=e(3),m=e(2),g=e(2),s=e(2),u=e(1),b=e(1),h=e(1),p=e(1);n.gameboard.placeShip(0,0,l,"horizontal"),n.gameboard.placeShip(9,6,i,"horizontal"),n.gameboard.placeShip(0,9,c,"vertical"),n.gameboard.placeShip(8,0,m,"horizontal"),n.gameboard.placeShip(5,4,g,"vertical"),n.gameboard.placeShip(2,6,s,"horizontal"),n.gameboard.placeShip(8,4,u,"horizontal"),n.gameboard.placeShip(2,2,b,"horizontal"),n.gameboard.placeShip(6,8,h,"horizontal"),n.gameboard.placeShip(5,0,p,"horizontal"),d.gameboard.placeShip(0,0,l,"horizontal"),d.gameboard.placeShip(9,6,i,"horizontal"),d.gameboard.placeShip(0,9,c,"vertical"),d.gameboard.placeShip(8,0,m,"horizontal"),d.gameboard.placeShip(5,4,g,"vertical"),d.gameboard.placeShip(2,6,s,"horizontal"),d.gameboard.placeShip(8,4,u,"horizontal"),d.gameboard.placeShip(2,2,b,"horizontal"),d.gameboard.placeShip(7,8,h,"horizontal"),d.gameboard.placeShip(5,0,p,"horizontal"),o=function(e,a){const o=document.createElement("div");function t(){o.textContent="";for(let a=0;a<e.gameboard.gameboard.length;a++)for(let t=0;t<e.gameboard.gameboard[a].length;t++){const r=document.createElement("div");"object"==typeof e.gameboard.gameboard[a][t]?(e.gameboard.gameboard[a][t].value="O")&&(r.innerHTML=e.gameboard.gameboard[a][t].value,r.classList.add("black")):"X"===e.gameboard.gameboard[a][t]?(r.innerHTML=e.gameboard.gameboard[a][t],r.classList.add("orange")):r.innerHTML=e.gameboard.gameboard[a][t],o.appendChild(r)}a.append(o)}return o.classList.add("container"),{render:t,attack:function a(o=0){if(o>=99)return void console.log("Maximum attempts reached. Exiting attack function.");let r=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());if("●"!==e.gameboard.gameboard[r][n]&&"X"!==e.gameboard.gameboard[r][n].value&&"X"!==e.gameboard.gameboard[r][n])return e.gameboard.receiveAttack(r,n),"object"==typeof e.gameboard.gameboard[r][n]?(e.gameboard.gameboard[r][n]=e.gameboard.gameboard[r][n].value,setTimeout(a,1e3),void t()):void t();a(o+1)}}}(n,t),function(e,a){const t=document.createElement("div");t.classList.add("container");for(let a=0;a<e.gameboard.gameboard.length;a++)for(let r=0;r<e.gameboard.gameboard[a].length;r++){const n=document.createElement("div");t.appendChild(n),n.addEventListener("click",(()=>{e.gameboard.receiveAttack([a],[r]),"object"==typeof e.gameboard.gameboard[a][r]?(n.innerHTML=e.gameboard.gameboard[a][r].value,n.classList.add("orange")):(n.innerHTML=e.gameboard.gameboard[a][r],setTimeout(o.attack,1e3),o.render())}))}a.append(t)}(d,r),o.render()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDbEMsTUFBTUMsRUFBWXBDLFNBQVNxQyxjQUFjLE9BQ3pDRCxFQUFVaEMsVUFBVUMsSUFBSSxhQUN4QixJQUFLLElBQUlsQixFQUFJLEVBQUdBLEVBQUlGLEVBQU9ELFVBQVVBLFVBQVVMLE9BQVFRLElBQ25ELElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJSCxFQUFPRCxVQUFVQSxVQUFVRyxHQUFHUixPQUFRUyxJQUFLLENBQzNELE1BQU1tRCxFQUFTdkMsU0FBU3FDLGNBQWMsT0FDdENELEVBQVVLLFlBQVlGLEdBQ3RCQSxFQUFPcEMsaUJBQWlCLFNBQVMsS0FDN0JsQixFQUFPRCxVQUFVaUMsY0FBYyxDQUFDOUIsR0FBRyxDQUFDQyxJQUNZLGlCQUF0Q0gsRUFBT0QsVUFBVUEsVUFBVUcsR0FBR0MsSUFDcENtRCxFQUFPQyxVQUFZdkQsRUFBT0QsVUFBVUEsVUFBVUcsR0FBR0MsR0FBRzJCLE1BQ3BEd0IsRUFBT25DLFVBQVVDLElBQUksWUFFckJrQyxFQUFPQyxVQUFZdkQsRUFBT0QsVUFBVUEsVUFBVUcsR0FBR0MsR0FDakQ4RCxXQUFXOUIsRUFBZ0J1QixPQUFPLEtBQ2xDdkIsRUFBZ0JrQixTQUNwQixHQUVSLENBRUpILEVBQUlPLE9BQU9OLEVBQ2YsQ0N0Q0lnQixDQUFvQjVCLEVBQVlGLEdBRWhDRixFQUFnQmtCLFFBQVEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL1VJLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlwID0gKHNoaXBMZW5ndGgpID0+IHtcbiAgY29uc3QgbGVuZ3RoID0gc2hpcExlbmd0aDtcbiAgbGV0IGhpdHMgPSAwO1xuXG4gIGZ1bmN0aW9uIGhpdCgpIHtcbiAgICBoaXRzICs9IDE7XG4gIH1cblxuICBmdW5jdGlvbiBpc1N1bmsoKSB7XG4gICAgaWYgKHNoaXBMZW5ndGggPD0gaGl0cykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaGl0LFxuICAgIGlzU3VuayxcbiAgICBsZW5ndGgsXG4gICAgZ2V0SGl0czogKCkgPT4gaGl0cyxcbiAgfTtcbn07XG5cbmV4cG9ydCB7IFNoaXAgfTtcbiIsImltcG9ydCB7IEdhbWVib2FyZCB9IGZyb20gXCIuL2dhbWVib2FyZFwiXHJcblxyXG5jb25zdCBQbGF5ZXIgPSAocGxheWVydHlwZSkgPT4ge1xyXG4gICAgY29uc3QgdHlwZSA9IHBsYXllcnR5cGU7XHJcblxyXG4gICAgY29uc3QgZ2FtZWJvYXJkID0gR2FtZWJvYXJkKHBsYXllcnR5cGUpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBnYW1lYm9hcmRcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtQbGF5ZXJ9XHJcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgeyBtb2RhbCB9IGZyb20gXCIuL1VJXCI7XG5cbmNvbnN0IEdhbWVib2FyZCA9IChwbGF5ZXIpID0+IHtcbiAgZnVuY3Rpb24gY3JlYXRlR2FtZUJvYXJkKCkge1xuICAgIGNvbnN0IGdhbWVCb2FyZCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDk7IGkrKykge1xuICAgICAgZ2FtZUJvYXJkW2ldID0gW107XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSA5OyBqKyspIHtcbiAgICAgICAgZ2FtZUJvYXJkW2ldW2pdID0gXCJcIjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGdhbWVCb2FyZDtcbiAgfVxuXG4gIGNvbnN0IGdhbWVib2FyZCA9IGNyZWF0ZUdhbWVCb2FyZCgpO1xuICBjb25zdCBzaGlwcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIF9pc1dpdGhpbkJvdW5kcyhpbmRleCkge1xuICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPiA5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vc3RhcnQgYW5kIGVuZCBoZXJlIC0gaW5kZXhlcyBvZiB0aGUgYm9yZCdzIGNlbGxzIHdoZXJlIGkgd2FudCB0byBwbGFjZSBzaGlwXG4gIC8vIHRoZSBjb29yZGluYXRlIG9iamVjdCBzaG91bGQgaGF2ZSBhIHJlZmVyZW5jZSB0byB0aGUgc2hpcCBpbiBpdHMgbG9jYXRpb24uXG4gIGZ1bmN0aW9uIHBsYWNlU2hpcChjb2wsIHJvdywgc2hpcCwgZGlyZWN0aW9uKSB7XG4gICAgaWYgKFxuICAgICAgX2lzV2l0aGluQm91bmRzKGNvbCkgJiZcbiAgICAgIF9pc1dpdGhpbkJvdW5kcyhyb3cpICYmXG4gICAgICBnYW1lYm9hcmRbY29sXVtyb3ddID09PSBcIlwiXG4gICAgKSB7XG4gICAgICBpZiAoZGlyZWN0aW9uID09PSBcInZlcnRpY2FsXCIgJiYgX2lzV2l0aGluQm91bmRzKGNvbCArIHNoaXAubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGNvbDsgaSA8IGNvbCArIHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoZ2FtZWJvYXJkW2ldW3Jvd10gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGdhbWVib2FyZFtpXVtyb3ddID0ge1xuICAgICAgICAgICAgICB0eXBlOiBgJHtzaGlwLmxlbmd0aH1zaGlwYCxcbiAgICAgICAgICAgICAgc2hpcDogc2hpcCxcbiAgICAgICAgICAgICAgdmFsdWU6IFwiT1wiLFxuICAgICAgICAgICAgICBpc1N1bms6IGZhbHNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNoaXBzLnB1c2goZ2FtZWJvYXJkW2ldW3Jvd10pO1xuICAgICAgICAgIH0gZWxzZSByZXR1cm4gY29uc29sZS5sb2coXCJJbnZhbGlkIHNwb3RcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBkaXJlY3Rpb24gPT09IFwiaG9yaXpvbnRhbFwiICYmXG4gICAgICAgIF9pc1dpdGhpbkJvdW5kcyhyb3cgKyBzaGlwLmxlbmd0aCAtIDEpXG4gICAgICApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHJvdzsgaSA8IHJvdyArIHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoZ2FtZWJvYXJkW2NvbF1baV0gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2xdW2ldID0ge1xuICAgICAgICAgICAgICB0eXBlOiBgJHtzaGlwLmxlbmd0aH1zaGlwYCxcbiAgICAgICAgICAgICAgc2hpcDogc2hpcCxcbiAgICAgICAgICAgICAgdmFsdWU6IFwiT1wiLFxuICAgICAgICAgICAgICBpc1N1bms6IGZhbHNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNoaXBzLnB1c2goZ2FtZWJvYXJkW2NvbF1baV0pO1xuICAgICAgICAgIH0gZWxzZSByZXR1cm4gY29uc29sZS5sb2coXCJJbnZhbGlkIHNwb3RcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKFwiSW5kZXggb3V0IG9mIGJvYXJkXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBnYW1lYm9hcmQ7XG4gIH1cbiAgXG5cbiAgLy9DdXJyZW50bHkgdGVzdGluZyB0aGlzIGluIGluZGV4LmpzXG4gIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2soY29sLCByb3cpIHtcbiAgICBpZiAoX2lzV2l0aGluQm91bmRzKGNvbCkgJiYgX2lzV2l0aGluQm91bmRzKHJvdykmJmNoZWNrRW5kR2FtZSgpICE9PSB0cnVlKSB7XG4gICAgICBsZXQgYm9hcmRDZWxsID0gZ2FtZWJvYXJkW2NvbF1bcm93XTtcbiAgICAgIGlmIChib2FyZENlbGwgPT09ICdcXHUyNUNGJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2UgaWYgKGJvYXJkQ2VsbCA9PT0gXCJcIikge1xuICAgICAgICBnYW1lYm9hcmRbY29sXVtyb3ddID0gJ1xcdTI1Q0YnO1xuICAgICAgICBjb25zb2xlLmxvZyhcIk1pc3NcIik7XG4gICAgICB9IGVsc2UgaWYgKGJvYXJkQ2VsbC52YWx1ZSA9PT0gXCJPXCIpIHtcbiAgICAgICAgYm9hcmRDZWxsLnNoaXAuaGl0KCk7XG4gICAgICAgIGJvYXJkQ2VsbC52YWx1ZSA9IFwiWFwiO1xuICAgICAgICBpZiAoYm9hcmRDZWxsLnNoaXAuaXNTdW5rKCkpIHtcbiAgICAgICAgICBib2FyZENlbGwuaXNTdW5rID0gdHJ1ZTtcbiAgICAgICAgICAvLyBfbWFya0NlbGxzQXJvdW5kU3VjY3Nlc3NmdWxsSGl0KGNvbCwgcm93KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlN1bmtcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coYm9hcmRDZWxsLmlzU3Vuayk7XG4gICAgICAgIGNoZWNrRW5kR2FtZSgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZyhcIkF0dGFjayBvdXQgb2YgYm9hcmRcIik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX21hcmtDZWxsc0Fyb3VuZFN1Y2NzZXNzZnVsbEhpdChjb2wsIHJvdykge1xuICAgIGNvbnN0IG5laWdoYm91cnMgPSBbXG4gICAgICBnYW1lYm9hcmRbY29sICsgMV0/Lltyb3ddLFxuICAgICAgZ2FtZWJvYXJkW2NvbCAtIDFdPy5bcm93XSxcbiAgICAgIGdhbWVib2FyZFtjb2xdPy5bcm93ICsgMV0sXG4gICAgICBnYW1lYm9hcmRbY29sXT8uW3JvdyAtIDFdLFxuICAgICAgZ2FtZWJvYXJkW2NvbCArIDFdPy5bcm93ICsgMV0sXG4gICAgICBnYW1lYm9hcmRbY29sIC0gMV0/Lltyb3cgLSAxXSxcbiAgICAgIGdhbWVib2FyZFtjb2wgLSAxXT8uW3JvdyArIDFdLFxuICAgICAgZ2FtZWJvYXJkW2NvbCArIDFdPy5bcm93IC0gMV0sXG4gICAgXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmVpZ2hib3Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKFxuICAgICAgICBuZWlnaGJvdXJzW2ldICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgbmVpZ2hib3Vyc1tpXS52YWx1ZSAhPT0gXCJPXCIgJiZcbiAgICAgICAgbmVpZ2hib3Vyc1tpXS52YWx1ZSAhPT0gXCJYXCJcbiAgICAgICkge1xuICAgICAgICBuZWlnaGJvdXJzW2ldID0gJ1xcdTI1Q0YnO1xuICAgICAgICAvLyBVcGRhdGUgY29ycmVzcG9uZGluZyB2YWx1ZSBpbiBnYW1lYm9hcmQgYXJyYXlcbiAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgZ2FtZWJvYXJkW2NvbCArIDFdW3Jvd10gPSAnXFx1MjVDRic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sIC0gMV1bcm93XSA9ICdcXHUyNUNGJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2xdW3JvdyArIDFdID0gJ1xcdTI1Q0YnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgZ2FtZWJvYXJkW2NvbF1bcm93IC0gMV0gPSAnXFx1MjVDRic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sICsgMV1bcm93ICsgMV0gPSAnXFx1MjVDRic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sIC0gMV1bcm93IC0gMV0gPSAnXFx1MjVDRic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sIC0gMV1bcm93ICsgMV0gPSAnXFx1MjVDRic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sICsgMV1bcm93IC0gMV0gPSAnXFx1MjVDRic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja0VuZEdhbWUoKSB7XG4gICAgbGV0IGNvdW50ZXIgPSAwO1xuICAgIGZvciAobGV0IHNoaXAgb2Ygc2hpcHMpIHtcbiAgICAgIGlmIChzaGlwLmlzU3VuayA9PT0gdHJ1ZSkge1xuICAgICAgICBjb3VudGVyKys7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGNvdW50ZXIpO1xuICAgIGlmIChjb3VudGVyID49IDEwKSB7XG4gICAgICBsZXQgbmV3cz0gbW9kYWwoYCR7cGxheWVyfWApO1xuICAgICAgbmV3cy5vcGVuTW9kYWwoKVxuICAgICAgY29uc29sZS5sb2coYCR7cGxheWVyfSBsb3NlYCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdhbWVib2FyZCxcbiAgICBwbGFjZVNoaXAsXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBjaGVja0VuZEdhbWUsXG4gIH07XG59O1xuXG5leHBvcnQgeyBHYW1lYm9hcmQgfTtcbiIsImltcG9ydCB7IHBsYXllckdhbWVib2FyZCB9IGZyb20gXCIuL2dhbWVcIjtcclxuXHJcbi8vTmVlZCB0byB3cml0ZSBlbmQgZ2FtZSBtYXNzYWdlLCBzdG9wIHBvc3NpYmlsaXR5IG9mIGNsaWNrcyBpZiBlbmRHYW1lXHJcblxyXG5mdW5jdGlvbiByZW5kZXJQbGF5ZXJHYW1lYm9hcmQocGxheWVyLCBib3gpIHtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NvbnRhaW5lcicpXHJcbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7ICAgXHJcbiAgICAgICAgY29udGFpbmVyLnRleHRDb250ZW50ID0gJyc7IFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YocGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal0pID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldW2pdLnZhbHVlID0gJ08nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxdWFyZS5pbm5lckhUTUwgPSBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoJ2JsYWNrJylcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXSA9PT0gXCJYXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZS5pbm5lckhUTUwgPSBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXTsgXHJcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoJ29yYW5nZScpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzcXVhcmUuaW5uZXJIVE1MID0gcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcclxuICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBib3guYXBwZW5kKGNvbnRhaW5lcilcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBNQVhfQVRURU1QVFMgPSA5OTtcclxuXHJcbiAgICBmdW5jdGlvbiBhdHRhY2soYXR0ZW1wdCA9IDApIHtcclxuICAgICAgICBpZiAoYXR0ZW1wdCA+PSBNQVhfQVRURU1QVFMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJNYXhpbXVtIGF0dGVtcHRzIHJlYWNoZWQuIEV4aXRpbmcgYXR0YWNrIGZ1bmN0aW9uLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBsZXQgY29sUmFuZG9tID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xyXG4gICAgICAgIGxldCByb3dSYW5kb20gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XHJcbiAgICBcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2NvbFJhbmRvbV1bcm93UmFuZG9tXSAhPT0gJ1xcdTI1Q0YnICYmXHJcbiAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2NvbFJhbmRvbV1bcm93UmFuZG9tXS52YWx1ZSAhPT0gJ1gnICYmXHJcbiAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2NvbFJhbmRvbV1bcm93UmFuZG9tXSAhPT0gJ1gnXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb2xSYW5kb20sIHJvd1JhbmRvbSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbY29sUmFuZG9tXVtyb3dSYW5kb21dID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbY29sUmFuZG9tXVtyb3dSYW5kb21dID0gcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbY29sUmFuZG9tXVtyb3dSYW5kb21dLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChhdHRhY2ssMTAwMClcclxuICAgICAgICAgICAgICAgIHJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhdHRhY2soYXR0ZW1wdCArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZW5kZXIsXHJcbiAgICAgICAgYXR0YWNrXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNvbXBHYW1lYm9hcmQgKHBsYXllciwgYm94KSB7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjb250YWluZXInKVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcXVhcmUpO1xyXG4gICAgICAgICAgICBzcXVhcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soW2ldLFtqXSlcclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZihwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXSkgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlLmlubmVySFRNTCA9IHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldW2pdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKCdvcmFuZ2UnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlLmlubmVySFRNTCA9IHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocGxheWVyR2FtZWJvYXJkLmF0dGFjaywxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJHYW1lYm9hcmQucmVuZGVyKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBib3guYXBwZW5kKGNvbnRhaW5lcik7XHJcbn1cclxuXHJcbmNvbnN0IG1vZGFsID0gKGxvc2VyKSA9PiB7XHJcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XHJcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpO1xyXG4gICAgY29uc3QgbmV3R2FtZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuXCIpO1xyXG4gICAgbmV3R2FtZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBjbG9zZU1vZGFsKClcclxuICAgIH0pXHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIG9wZW5Nb2RhbCgpIHtcclxuICAgICAgICBjb25zdCB3aW5NYXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndpbicpO1xyXG4gICAgICAgIHdpbk1hc3NhZ2UudGV4dENvbnRlbnQgPSBgJHtsb3Nlcn0gbG9zdCFgXHJcbiAgICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xyXG4gICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7b3Blbk1vZGFsfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQge1xyXG4gICAgcmVuZGVyUGxheWVyR2FtZWJvYXJkLFxyXG4gICAgcmVuZGVyQ29tcEdhbWVib2FyZCxcclxuICAgIG1vZGFsXHJcbn0iLCJpbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xyXG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJcIjtcclxuaW1wb3J0IHsgcmVuZGVyUGxheWVyR2FtZWJvYXJkLCByZW5kZXJDb21wR2FtZWJvYXJkIH0gZnJvbSBcIi4vVUlcIjtcclxuXHJcbmxldCBwbGF5ZXJHYW1lYm9hcmRcclxuZnVuY3Rpb24gcGxheUdhbWUgKCkge1xyXG4gICAgXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcbiAgICBcclxuICAgIGNvbnN0IHBsYXllckJvYXJkQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWVib2FyZC1vbmUnKTtcclxuICAgIGNvbnN0IGNvbXB1dGVyQm9hcmRCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWJvYXJkLXR3bycpO1xyXG5cclxuICAgIGNvbnN0IHJlYWxQbGF5ZXIgPSBQbGF5ZXIoJ1lvdScpO1xyXG4gICAgY29uc3QgY29tcFBsYXllciA9IFBsYXllcignQ29tcHV0ZXInKTtcclxuXHJcbiAgICBjb25zdCBmb3VyU2hpcCA9IFNoaXAoNClcclxuICAgIGNvbnN0IHRocmVlU2hpcE9uZSA9IFNoaXAoMyk7XHJcbiAgICBjb25zdCB0aHJlZVNoaXBUd28gPSBTaGlwKDMpO1xyXG4gICAgY29uc3QgdHdvU2hpcE9uZSA9IFNoaXAoMik7XHJcbiAgICBjb25zdCB0d29TaGlwVHdvID0gU2hpcCgyKTtcclxuICAgIGNvbnN0IHR3b1NoaXBUaHJlZSA9IFNoaXAoMik7XHJcbiAgICBjb25zdCBvbmVTaGlwT25lID0gU2hpcCgxKTtcclxuICAgIGNvbnN0IG9uZVNoaXBUd28gPSBTaGlwKDEpO1xyXG4gICAgY29uc3Qgb25lU2hpcFRocmVlID0gU2hpcCgxKTtcclxuICAgIGNvbnN0IG9uZVNoaXBGb3VyID0gU2hpcCgxKTtcclxuXHJcblxyXG4gICAgcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDAsMCwgZm91clNoaXAsICdob3Jpem9udGFsJyk7XHJcbiAgICByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoOSw2LCB0aHJlZVNoaXBPbmUsICdob3Jpem9udGFsJyk7XHJcbiAgICByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoMCw5LCB0aHJlZVNoaXBUd28sICd2ZXJ0aWNhbCcpO1xyXG4gICAgcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDgsMCwgdHdvU2hpcE9uZSwgJ2hvcml6b250YWwnKTtcclxuICAgIHJlYWxQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg1LDQsIHR3b1NoaXBUd28sICd2ZXJ0aWNhbCcpO1xyXG4gICAgcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDIsNiwgdHdvU2hpcFRocmVlLCAnaG9yaXpvbnRhbCcpO1xyXG4gICAgcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDgsNCwgb25lU2hpcE9uZSwgJ2hvcml6b250YWwnKTtcclxuICAgIHJlYWxQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCgyLDIsIG9uZVNoaXBUd28sICdob3Jpem9udGFsJyk7XHJcbiAgICByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoNiw4LCBvbmVTaGlwVGhyZWUsICdob3Jpem9udGFsJyk7XHJcbiAgICByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoNSwwLCBvbmVTaGlwRm91ciwgJ2hvcml6b250YWwnKTtcclxuXHJcbiAgICBjb21wUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoMCwwLCBmb3VyU2hpcCwgJ2hvcml6b250YWwnKTtcclxuICAgIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg5LDYsIHRocmVlU2hpcE9uZSwgJ2hvcml6b250YWwnKTtcclxuICAgIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCgwLDksIHRocmVlU2hpcFR3bywgJ3ZlcnRpY2FsJyk7XHJcbiAgICBjb21wUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoOCwwLCB0d29TaGlwT25lLCAnaG9yaXpvbnRhbCcpO1xyXG4gICAgY29tcFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDUsNCwgdHdvU2hpcFR3bywgJ3ZlcnRpY2FsJyk7XHJcbiAgICBjb21wUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoMiw2LCB0d29TaGlwVGhyZWUsICdob3Jpem9udGFsJyk7XHJcbiAgICBjb21wUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoOCw0LCBvbmVTaGlwT25lLCAnaG9yaXpvbnRhbCcpO1xyXG4gICAgY29tcFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDIsMiwgb25lU2hpcFR3bywgJ2hvcml6b250YWwnKTtcclxuICAgIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg3LDgsIG9uZVNoaXBUaHJlZSwgJ2hvcml6b250YWwnKTtcclxuICAgIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg1LDAsIG9uZVNoaXBGb3VyLCAnaG9yaXpvbnRhbCcpO1xyXG5cclxuICAgIFxyXG4gICAgcGxheWVyR2FtZWJvYXJkID0gcmVuZGVyUGxheWVyR2FtZWJvYXJkKHJlYWxQbGF5ZXIsIHBsYXllckJvYXJkQm94KTtcclxuICAgIHJlbmRlckNvbXBHYW1lYm9hcmQoY29tcFBsYXllciwgY29tcHV0ZXJCb2FyZEJveClcclxuXHJcbiAgICBwbGF5ZXJHYW1lYm9hcmQucmVuZGVyKCk7XHJcbiAgICBcclxufSk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQge1xyXG4gICAgcGxheWVyR2FtZWJvYXJkLFxyXG4gICAgcGxheUdhbWVcclxufVxyXG4iXSwibmFtZXMiOlsiU2hpcCIsInNoaXBMZW5ndGgiLCJoaXRzIiwiaGl0IiwiaXNTdW5rIiwibGVuZ3RoIiwiZ2V0SGl0cyIsIlBsYXllciIsInBsYXllcnR5cGUiLCJ0eXBlIiwiZ2FtZWJvYXJkIiwicGxheWVyIiwiZ2FtZUJvYXJkIiwiaSIsImoiLCJjcmVhdGVHYW1lQm9hcmQiLCJzaGlwcyIsIl9pc1dpdGhpbkJvdW5kcyIsImluZGV4IiwiY2hlY2tFbmRHYW1lIiwiY291bnRlciIsInNoaXAiLCJjb25zb2xlIiwibG9nIiwibG9zZXIiLCJtb2RhbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm92ZXJsYXkiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwibG9jYXRpb24iLCJyZWxvYWQiLCJvcGVuTW9kYWwiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsInBsYWNlU2hpcCIsImNvbCIsInJvdyIsImRpcmVjdGlvbiIsInZhbHVlIiwicHVzaCIsInJlY2VpdmVBdHRhY2siLCJib2FyZENlbGwiLCJHYW1lYm9hcmQiLCJwbGF5ZXJHYW1lYm9hcmQiLCJwbGF5ZXJCb2FyZEJveCIsImNvbXB1dGVyQm9hcmRCb3giLCJyZWFsUGxheWVyIiwiY29tcFBsYXllciIsImZvdXJTaGlwIiwidGhyZWVTaGlwT25lIiwidGhyZWVTaGlwVHdvIiwidHdvU2hpcE9uZSIsInR3b1NoaXBUd28iLCJ0d29TaGlwVGhyZWUiLCJvbmVTaGlwT25lIiwib25lU2hpcFR3byIsIm9uZVNoaXBUaHJlZSIsIm9uZVNoaXBGb3VyIiwiYm94IiwiY29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsInJlbmRlciIsInNxdWFyZSIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiYXBwZW5kIiwiYXR0YWNrIiwiYXR0ZW1wdCIsImNvbFJhbmRvbSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInJvd1JhbmRvbSIsInNldFRpbWVvdXQiLCJyZW5kZXJQbGF5ZXJHYW1lYm9hcmQiLCJyZW5kZXJDb21wR2FtZWJvYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==