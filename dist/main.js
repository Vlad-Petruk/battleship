(()=>{"use strict";const e=e=>{let a=0;return{hit:function(){a+=1},isSunk:function(){return e<=a},length:e,getHits:()=>a}},a=e=>{const a=function(){const e=[];for(let a=0;a<=9;a++){e[a]=[];for(let o=0;o<=9;o++)e[a][o]=""}return e}(),o=[];function t(e){return!(e<0||e>9)}function n(e,o){const t=[a[e+1]?.[o],a[e-1]?.[o],a[e]?.[o+1],a[e]?.[o-1],a[e+1]?.[o+1],a[e-1]?.[o-1],a[e-1]?.[o+1],a[e+1]?.[o-1]];for(let e=0;e<t.length;e++)if(t[e]&&"O"===t[e].value)return!0;return!1}function r(){let a=0;for(let e=o.length-1;e>=0;e--)!0===o[e].ship.isSunk()&&a++;if(console.log(a),a>=20)return(e=>{const a=document.querySelector(".modal"),o=document.querySelector(".overlay");return document.querySelector(".btn").addEventListener("click",(()=>{a.classList.add("hidden"),o.classList.add("hidden"),location.reload()})),{openModal:function(){document.querySelector(".win").textContent=`${e} lost!`,a.classList.remove("hidden"),o.classList.remove("hidden")}}})(`${e}`).openModal(),console.log(`${e} lose`),!0}return{gameboard:a,placeShip:function(r,d,i,c){if(!t(r)||!t(d)||n(r,d))return 2;if("vertical"===c&&t(r+i.length-1)&&!n(r+i.length-1,d))for(let t=r;t<r+i.length;t++){if(""!==a[t][d])return 2;a[t][d]={type:`${e}${i.length}ship`,ship:i,value:"O",isSunk:!1},o.push(a[t][d])}else{if("horizontal"!==c||!t(d+i.length-1)||n(r,d+i.length-1))return 2;for(let t=d;t<d+i.length;t++){if(""!==a[r][t])return 2;a[r][t]={type:`${e}${i.length}ship`,ship:i,value:"O",isSunk:!1},o.push(a[r][t])}}return a},receiveAttack:function(e,o){if(!t(e)||!t(o))return console.log("Attack out of board");{let t=a[e][o];""===t?a[e][o]="●":"O"===t.value&&(t.ship.hit(),t.value="X",t.ship.isSunk()&&(t.isSunk=!0,function(e,o){const t=[a[e+1]?.[o],a[e-1]?.[o],a[e]?.[o+1],a[e]?.[o-1],a[e+1]?.[o+1],a[e-1]?.[o-1],a[e-1]?.[o+1],a[e+1]?.[o-1]];for(let n=0;n<t.length;n++)if(void 0!==t[n]&&"O"!==t[n].value)switch(t[n]="●",n){case 0:if("X"!==a[e+1][o]&&void 0!==a[e+1][o]){a[e+1][o]="●";break}case 1:if("X"!==a[e-1][o]&&void 0!==a[e-1][o]){a[e-1][o]="●";break}case 2:if("X"!==a[e][o+1]&&void 0!==a[e][o+1]){a[e][o+1]="●";break}case 3:if("X"!==a[e][o-1]&&void 0!==a[e][o-1]){a[e][o-1]="●";break}case 4:if("X"!==a[e+1][o+1]&&void 0!==a[e+1][o+1]){a[e+1][o+1]="●";break}case 5:if("X"!==a[e-1][o-1]&&void 0!==a[e-1][o-1]){a[e-1][o-1]="●";break}case 6:if("X"!==a[e-1][o+1]&&void 0!==a[e-1][o+1]){a[e-1][o+1]="●";break}case 7:if("X"!==a[e+1][o-1]&&void 0!==a[e+1][o-1]){a[e+1][o-1]="●";break}}else console.log("asfasf")}(e,o),console.log("Sunk")),console.log(t.isSunk),r())}},checkEndGame:r}},o=e=>({type:e,gameboard:a(e)});let t;document.addEventListener("DOMContentLoaded",(()=>{!function(){const a=document.querySelector(".gameboard-one"),n=document.querySelector(".gameboard-two"),r=o("You"),d=o("Computer"),i=e(4),c=e(3),l=e(3),s=e(2),m=e(2),g=e(2),u=e(1),b=e(1),f=e(1),h=e(1),v=[e(4),e(3),e(3),e(2),e(2),e(2),e(1),e(1),e(1),e(1)];function p(e,a){a.forEach((a=>{let o=!1;for(;!o;){let t=Math.random()<.5?"horizontal":"vertical",n=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());2!==e.gameboard.placeShip(n,r,a,t)&&(o=!0)}}))}p(r,[i,c,l,s,m,g,u,b,f,h]),p(d,v),t=function(e,a){const o=document.createElement("div");function t(){o.textContent="";for(let a=0;a<e.gameboard.gameboard.length;a++)for(let t=0;t<e.gameboard.gameboard[a].length;t++){const n=document.createElement("div");"object"==typeof e.gameboard.gameboard[a][t]?"O"===e.gameboard.gameboard[a][t].value&&(n.innerHTML=e.gameboard.gameboard[a][t].value,n.classList.add("black")):"X"===e.gameboard.gameboard[a][t]?(n.innerHTML=e.gameboard.gameboard[a][t],n.classList.add("orange")):n.innerHTML=e.gameboard.gameboard[a][t],o.appendChild(n)}a.append(o)}return o.classList.add("container"),{render:t,attack:function a(o=0){if(o>=99)return void console.log("Maximum attempts reached. Exiting attack function.");let n=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());if("●"!==e.gameboard.gameboard[n][r]&&"X"!==e.gameboard.gameboard[n][r].value&&"X"!==e.gameboard.gameboard[n][r])return e.gameboard.receiveAttack(n,r),"object"==typeof e.gameboard.gameboard[n][r]?(e.gameboard.gameboard[n][r]=e.gameboard.gameboard[n][r].value,setTimeout(a,1e3),void t()):void t();a(o+1)}}}(r,a),function(e,a){const o=document.createElement("div");o.classList.add("container"),function n(){o.textContent="";for(let a=0;a<e.gameboard.gameboard.length;a++)for(let r=0;r<e.gameboard.gameboard[a].length;r++){const d=document.createElement("div");"object"==typeof e.gameboard.gameboard[a][r]?"O"===e.gameboard.gameboard[a][r].value?(d.innerHTML=e.gameboard.gameboard[a][r].value,d.classList.add("black")):"X"===e.gameboard.gameboard[a][r].value&&(e.gameboard.gameboard[a][r]="X",d.innerHTML="X",d.classList.add("orange")):"X"===e.gameboard.gameboard[a][r]?(d.innerHTML=e.gameboard.gameboard[a][r],d.classList.add("orange")):d.innerHTML=e.gameboard.gameboard[a][r],d.addEventListener("click",(()=>{"●"!==d.textContent&&"X"!==d.textContent&&(e.gameboard.receiveAttack(a,r),"object"==typeof e.gameboard.gameboard[a][r]?n():(n(),setTimeout(t.attack,1e3),t.render()))})),o.appendChild(d)}a.append(o)}()}(d,n),t.render()}()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUFBVUEsVUFBVUUsR0FBR0MsR0FBR1MsT0FDaEN3RCxFQUFPQyxVQUFZdEUsRUFBT0MsVUFBVUEsVUFBVUUsR0FBR0MsR0FBR1MsTUFDcER3RCxFQUFPNUMsVUFBVUMsSUFBSSxVQUM0QixNQUEzQzFCLEVBQU9DLFVBQVVBLFVBQVVFLEdBQUdDLEdBQUdTLFFBQ3ZDYixFQUFPQyxVQUFVQSxVQUFVRSxHQUFHQyxHQUFLLElBQ25DaUUsRUFBT0MsVUFBYSxJQUNwQkQsRUFBTzVDLFVBQVVDLElBQUksV0FFbUIsTUFBckMxQixFQUFPQyxVQUFVQSxVQUFVRSxHQUFHQyxJQUNyQ2lFLEVBQU9DLFVBQVl0RSxFQUFPQyxVQUFVQSxVQUFVRSxHQUFHQyxHQUNqRGlFLEVBQU81QyxVQUFVQyxJQUFJLFdBR3JCMkMsRUFBT0MsVUFBWXRFLEVBQU9DLFVBQVVBLFVBQVVFLEdBQUdDLEdBRXJEaUUsRUFBTzdDLGlCQUFpQixTQUFTLEtBQ0osTUFBdEI2QyxFQUFPdkMsYUFBK0MsTUFBdEJ1QyxFQUFPdkMsY0FDdEM5QixFQUFPQyxVQUFVbUMsY0FBY2pDLEVBQUVDLEdBQ2UsaUJBQXRDSixFQUFPQyxVQUFVQSxVQUFVRSxHQUFHQyxHQUNwQ2dFLEtBRUFBLElBQ0FTLFdBQVduQyxFQUFnQitCLE9BQU8sS0FDbEMvQixFQUFnQjBCLFVBRXhCLElBRUpGLEVBQVVLLFlBQVlGLEVBQzFCLENBQ0ZKLEVBQUlPLE9BQU9OLEVBQ2pCLENBQ0FFLEVBQ0osQ0VuQklXLENBQW9CakMsRUFBWUYsR0FFaENGLEVBQWdCMEIsUUFFcEIsQ0MzRklZLEVBQVMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL1VJLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNoaXAgPSAoc2hpcExlbmd0aCkgPT4ge1xuICBjb25zdCBsZW5ndGggPSBzaGlwTGVuZ3RoO1xuICBsZXQgaGl0cyA9IDA7XG5cbiAgZnVuY3Rpb24gaGl0KCkge1xuICAgIGhpdHMgKz0gMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzU3VuaygpIHtcbiAgICBpZiAoc2hpcExlbmd0aCA8PSBoaXRzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBoaXQsXG4gICAgaXNTdW5rLFxuICAgIGxlbmd0aCxcbiAgICBnZXRIaXRzOiAoKSA9PiBoaXRzLFxuICB9O1xufTtcblxuZXhwb3J0IHsgU2hpcCB9O1xuIiwiaW1wb3J0IHsgbW9kYWwgfSBmcm9tIFwiLi9VSVwiO1xuXG5jb25zdCBHYW1lYm9hcmQgPSAocGxheWVyKSA9PiB7XG4gIGZ1bmN0aW9uIGNyZWF0ZUdhbWVCb2FyZCgpIHtcbiAgICBjb25zdCBnYW1lQm9hcmQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSA5OyBpKyspIHtcbiAgICAgIGdhbWVCb2FyZFtpXSA9IFtdO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gOTsgaisrKSB7XG4gICAgICAgIGdhbWVCb2FyZFtpXVtqXSA9IFwiXCI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBnYW1lQm9hcmQ7XG4gIH1cblxuICBjb25zdCBnYW1lYm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoKTtcbiAgY29uc3Qgc2hpcHMgPSBbXTtcblxuICBmdW5jdGlvbiBfaXNXaXRoaW5Cb3VuZHMoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gOSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvL3N0YXJ0IGFuZCBlbmQgaGVyZSAtIGluZGV4ZXMgb2YgdGhlIGJvcmQncyBjZWxscyB3aGVyZSBpIHdhbnQgdG8gcGxhY2Ugc2hpcFxuICBmdW5jdGlvbiBwbGFjZVNoaXAoY29sLCByb3csIHNoaXAsIGRpcmVjdGlvbikge1xuICAgIGlmIChfaXNXaXRoaW5Cb3VuZHMoY29sKSAmJiBfaXNXaXRoaW5Cb3VuZHMocm93KSAmJiAhX2NoZWNrQ2VsbHNBcm91bmQoY29sLCByb3cpKSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09IFwidmVydGljYWxcIiAmJiBfaXNXaXRoaW5Cb3VuZHMoY29sICsgc2hpcC5sZW5ndGggLSAxKSYmIV9jaGVja0NlbGxzQXJvdW5kKGNvbCArIHNoaXAubGVuZ3RoIC0gMSwgcm93KSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGNvbDsgaSA8IGNvbCArIHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZWJvYXJkW2ldW3Jvd10gPT09IFwiXCIgKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVib2FyZFtpXVtyb3ddID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogYCR7cGxheWVyfSR7c2hpcC5sZW5ndGh9c2hpcGAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwOiBzaGlwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiT1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTdW5rOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgc2hpcHMucHVzaChnYW1lYm9hcmRbaV1bcm93XSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHJldHVybiAyOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IFwiaG9yaXpvbnRhbFwiICYmIF9pc1dpdGhpbkJvdW5kcyhyb3cgKyBzaGlwLmxlbmd0aCAtIDEpJiYhX2NoZWNrQ2VsbHNBcm91bmQoY29sLCByb3cgKyBzaGlwLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcm93OyBpIDwgcm93ICsgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChnYW1lYm9hcmRbY29sXVtpXSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBnYW1lYm9hcmRbY29sXVtpXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGAke3BsYXllcn0ke3NoaXAubGVuZ3RofXNoaXBgLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcDogc2hpcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIk9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU3VuazogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHNoaXBzLnB1c2goZ2FtZWJvYXJkW2NvbF1baV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gMjsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSByZXR1cm4gMjsgXG4gICAgfSBlbHNlIHJldHVybiAyOyBcblxuICAgIHJldHVybiBnYW1lYm9hcmQ7XG59XG5cbiAgXG5cbiAgLy9DdXJyZW50bHkgdGVzdGluZyB0aGlzIGluIGluZGV4LmpzXG4gIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2soY29sLCByb3cpIHtcbiAgICBpZiAoX2lzV2l0aGluQm91bmRzKGNvbCkgJiYgX2lzV2l0aGluQm91bmRzKHJvdykpIHtcbiAgICAgIGxldCBib2FyZENlbGwgPSBnYW1lYm9hcmRbY29sXVtyb3ddO1xuICAgICAgICBpZiAoYm9hcmRDZWxsID09PSBcIlwiKSB7XG4gICAgICAgIGdhbWVib2FyZFtjb2xdW3Jvd10gPSAnXFx1MjVDRic7XG4gICAgICB9IGVsc2UgaWYgKGJvYXJkQ2VsbC52YWx1ZSA9PT0gXCJPXCIpIHtcbiAgICAgICAgYm9hcmRDZWxsLnNoaXAuaGl0KCk7XG4gICAgICAgIGJvYXJkQ2VsbC52YWx1ZSA9IFwiWFwiO1xuICAgICAgICBpZiAoYm9hcmRDZWxsLnNoaXAuaXNTdW5rKCkpIHtcbiAgICAgICAgICBib2FyZENlbGwuaXNTdW5rID0gdHJ1ZTtcbiAgICAgICAgICBfbWFya0NlbGxzQXJvdW5kU3VjY3Nlc3NmdWxsSGl0KGNvbCwgcm93KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlN1bmtcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coYm9hcmRDZWxsLmlzU3Vuayk7XG4gICAgICAgIGNoZWNrRW5kR2FtZSgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZyhcIkF0dGFjayBvdXQgb2YgYm9hcmRcIik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2NoZWNrQ2VsbHNBcm91bmQoY29sLCByb3cpIHtcbiAgICBjb25zdCBuZWlnaGJvdXJzID0gW1xuICAgICAgZ2FtZWJvYXJkW2NvbCArIDFdPy5bcm93XSxcbiAgICAgIGdhbWVib2FyZFtjb2wgLSAxXT8uW3Jvd10sXG4gICAgICBnYW1lYm9hcmRbY29sXT8uW3JvdyArIDFdLFxuICAgICAgZ2FtZWJvYXJkW2NvbF0/Lltyb3cgLSAxXSxcbiAgICAgIGdhbWVib2FyZFtjb2wgKyAxXT8uW3JvdyArIDFdLFxuICAgICAgZ2FtZWJvYXJkW2NvbCAtIDFdPy5bcm93IC0gMV0sXG4gICAgICBnYW1lYm9hcmRbY29sIC0gMV0/Lltyb3cgKyAxXSxcbiAgICAgIGdhbWVib2FyZFtjb2wgKyAxXT8uW3JvdyAtIDFdLFxuICAgIF07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5laWdoYm91cnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChuZWlnaGJvdXJzW2ldICYmIG5laWdoYm91cnNbaV0udmFsdWUgPT09IFwiT1wiKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBcbiAgcmV0dXJuIGZhbHNlXG59XG5cbi8vTmVlZCB0byBtYXJrIG5vdCBvbmx5IGFyb3VuZCBvbmUgY2VsbFxuZnVuY3Rpb24gX21hcmtDZWxsc0Fyb3VuZFN1Y2NzZXNzZnVsbEhpdChjb2wsIHJvdykge1xuICBjb25zdCBuZWlnaGJvdXJzID0gW1xuICAgIGdhbWVib2FyZFtjb2wgKyAxXT8uW3Jvd10sXG4gICAgZ2FtZWJvYXJkW2NvbCAtIDFdPy5bcm93XSxcbiAgICBnYW1lYm9hcmRbY29sXT8uW3JvdyArIDFdLFxuICAgIGdhbWVib2FyZFtjb2xdPy5bcm93IC0gMV0sXG4gICAgZ2FtZWJvYXJkW2NvbCArIDFdPy5bcm93ICsgMV0sXG4gICAgZ2FtZWJvYXJkW2NvbCAtIDFdPy5bcm93IC0gMV0sXG4gICAgZ2FtZWJvYXJkW2NvbCAtIDFdPy5bcm93ICsgMV0sXG4gICAgZ2FtZWJvYXJkW2NvbCArIDFdPy5bcm93IC0gMV0sXG4gIF07XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKFxuICAgICAgbmVpZ2hib3Vyc1tpXSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICBuZWlnaGJvdXJzW2ldLnZhbHVlICE9PSBcIk9cIikge1xuICAgICAgbmVpZ2hib3Vyc1tpXSA9ICdcXHUyNUNGJztcbiAgICAgICAgLy8gVXBkYXRlIGNvcnJlc3BvbmRpbmcgdmFsdWUgaW4gZ2FtZWJvYXJkIGFycmF5XG4gICAgICBzd2l0Y2ggKGkpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGlmKGdhbWVib2FyZFtjb2wgKyAxXVtyb3ddICE9PSAnWCcmJmdhbWVib2FyZFtjb2wgKyAxXVtyb3ddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgKyAxXVtyb3ddID0gJ1xcdTI1Q0YnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmKGdhbWVib2FyZFtjb2wgLSAxXVtyb3ddICE9PSAnWCcmJmdhbWVib2FyZFtjb2wgLTFdW3Jvd10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZ2FtZWJvYXJkW2NvbCAtIDFdW3Jvd10gPSAnXFx1MjVDRic7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgaWYoZ2FtZWJvYXJkW2NvbF1bcm93ICsgMV0gIT09ICdYJyYmZ2FtZWJvYXJkW2NvbF1bcm93KzFdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2xdW3JvdyArIDFdID0gJ1xcdTI1Q0YnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIGlmKGdhbWVib2FyZFtjb2xdW3JvdyAtIDFdICE9PSAnWCcmJmdhbWVib2FyZFtjb2xdW3Jvdy0xXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sXVtyb3cgLSAxXSA9ICdcXHUyNUNGJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBpZihnYW1lYm9hcmRbY29sICsgMV1bcm93ICsgMV0gIT09ICdYJyYmZ2FtZWJvYXJkW2NvbCArIDFdW3JvdyArMV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZ2FtZWJvYXJkW2NvbCArIDFdW3JvdyArIDFdID0gJ1xcdTI1Q0YnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIGlmKGdhbWVib2FyZFtjb2wgLSAxXVtyb3cgLSAxXSAhPT0gJ1gnJiZnYW1lYm9hcmRbY29sIC0xXVtyb3ctMV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZ2FtZWJvYXJkW2NvbCAtIDFdW3JvdyAtIDFdID0gJ1xcdTI1Q0YnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIGlmKGdhbWVib2FyZFtjb2wgLSAxXVtyb3cgKyAxXSAhPT0gJ1gnJiZnYW1lYm9hcmRbY29sIC0gMV1bcm93KzFdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgLSAxXVtyb3cgKyAxXSA9ICdcXHUyNUNGJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgICBpZihnYW1lYm9hcmRbY29sICsgMV1bcm93IC0gMV0gIT09ICdYJyYmZ2FtZWJvYXJkW2NvbCArIDFdW3Jvdy0xXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sICsgMV1bcm93IC0gMV0gPSAnXFx1MjVDRic7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgXG4gICAgfSBlbHNlIGNvbnNvbGUubG9nKCdhc2Zhc2YnKVxuICB9XG59XG5cbiAgZnVuY3Rpb24gY2hlY2tFbmRHYW1lKCkge1xuICAgIGxldCBjb3VudGVyID0gMDtcbiAgICBmb3IgKGxldCBpID0gc2hpcHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGlmIChzaGlwc1tpXS5zaGlwLmlzU3VuaygpID09PSB0cnVlKSB7XG4gICAgICAgIGNvdW50ZXIrKyA7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGAke3BsYXllcn0gLSBTaGlwICR7aX0gaXMgc3Vua2ApO1xuICAgIH1cbiAgIH1cbiAgLy8gIGNvbnNvbGUubG9nKHNoaXBzKVxuICAgIGNvbnNvbGUubG9nKGNvdW50ZXIpO1xuICAgIGlmIChjb3VudGVyID49IDIwKSB7XG4gICAgICBsZXQgbmV3cz0gbW9kYWwoYCR7cGxheWVyfWApO1xuICAgICAgbmV3cy5vcGVuTW9kYWwoKVxuICAgICAgY29uc29sZS5sb2coYCR7cGxheWVyfSBsb3NlYCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdhbWVib2FyZCxcbiAgICBwbGFjZVNoaXAsXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBjaGVja0VuZEdhbWUsXG4gIH07XG59O1xuXG5leHBvcnQgeyBHYW1lYm9hcmQgfVxuIiwiaW1wb3J0IHsgcGxheWVyR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZVwiO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyUGxheWVyR2FtZWJvYXJkKHBsYXllciwgYm94KSB7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjb250YWluZXInKVxyXG4gICAgZnVuY3Rpb24gcmVuZGVyKCkgeyAgIFxyXG4gICAgICAgIGNvbnRhaW5lci50ZXh0Q29udGVudCA9ICcnOyBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mKHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldW2pdKSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXS52YWx1ZSA9PT0gJ08nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxdWFyZS5pbm5lckhUTUwgPSBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoJ2JsYWNrJylcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXSA9PT0gXCJYXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZS5pbm5lckhUTUwgPSBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXTsgXHJcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoJ29yYW5nZScpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzcXVhcmUuaW5uZXJIVE1MID0gcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcclxuICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBib3guYXBwZW5kKGNvbnRhaW5lcilcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBNQVhfQVRURU1QVFMgPSA5OTtcclxuXHJcbiAgICBmdW5jdGlvbiBhdHRhY2soYXR0ZW1wdCA9IDApIHtcclxuICAgICAgICBpZiAoYXR0ZW1wdCA+PSBNQVhfQVRURU1QVFMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJNYXhpbXVtIGF0dGVtcHRzIHJlYWNoZWQuIEV4aXRpbmcgYXR0YWNrIGZ1bmN0aW9uLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBsZXQgY29sUmFuZG9tID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xyXG4gICAgICAgIGxldCByb3dSYW5kb20gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XHJcbiAgICBcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2NvbFJhbmRvbV1bcm93UmFuZG9tXSAhPT0gJ1xcdTI1Q0YnICYmXHJcbiAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2NvbFJhbmRvbV1bcm93UmFuZG9tXS52YWx1ZSAhPT0gJ1gnICYmXHJcbiAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2NvbFJhbmRvbV1bcm93UmFuZG9tXSAhPT0gJ1gnXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5nYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb2xSYW5kb20sIHJvd1JhbmRvbSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbY29sUmFuZG9tXVtyb3dSYW5kb21dID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbY29sUmFuZG9tXVtyb3dSYW5kb21dID0gcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbY29sUmFuZG9tXVtyb3dSYW5kb21dLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChhdHRhY2ssMTAwMClcclxuICAgICAgICAgICAgICAgIHJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhdHRhY2soYXR0ZW1wdCArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZW5kZXIsXHJcbiAgICAgICAgYXR0YWNrXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNvbXBHYW1lYm9hcmQgKHBsYXllciwgYm94KSB7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyJylcclxuICAgIGZ1bmN0aW9uIHJlbmRlciAoKSB7XHJcbiAgICAgICAgY29udGFpbmVyLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIC8vQ29tZW50ZWQgZm9yIGNoZWNraW5nIHJhbmRvbSBzaGlwIHBsYWNlbWVudCBvbiBjb21wIGJvYXJkXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZihwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXSkgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal0udmFsdWUgPT09ICdPJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmUuaW5uZXJIVE1MID0gcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKCdibGFjaycpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldW2pdLnZhbHVlID09PSAnWCcpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXSA9ICdYJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmUuaW5uZXJIVE1MICA9ICdYJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoJ29yYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal0gPT09ICdYJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlLmlubmVySFRNTCA9IHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKCdvcmFuZ2UnKTs7XHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBzcXVhcmUuaW5uZXJIVE1MID0gcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal07IFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3F1YXJlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNxdWFyZS50ZXh0Q29udGVudCAhPT0nXFx1MjVDRicmJnNxdWFyZS50ZXh0Q29udGVudCAhPT1cIlhcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soaSxqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YocGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal0pID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHBsYXllckdhbWVib2FyZC5hdHRhY2ssMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJHYW1lYm9hcmQucmVuZGVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gYm94LmFwcGVuZChjb250YWluZXIpO1xyXG4gICAgfVxyXG4gICAgcmVuZGVyKClcclxufVxyXG5cclxuY29uc3QgbW9kYWwgPSAobG9zZXIpID0+IHtcclxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcclxuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIik7XHJcbiAgICBjb25zdCBuZXdHYW1lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG5cIik7XHJcbiAgICBuZXdHYW1lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGNsb3NlTW9kYWwoKVxyXG4gICAgfSlcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gb3Blbk1vZGFsKCkge1xyXG4gICAgICAgIGNvbnN0IHdpbk1hc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2luJyk7XHJcbiAgICAgICAgd2luTWFzc2FnZS50ZXh0Q29udGVudCA9IGAke2xvc2VyfSBsb3N0IWBcclxuICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XHJcbiAgICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtvcGVuTW9kYWx9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCB7XHJcbiAgICByZW5kZXJQbGF5ZXJHYW1lYm9hcmQsXHJcbiAgICByZW5kZXJDb21wR2FtZWJvYXJkLFxyXG4gICAgbW9kYWxcclxufSIsImltcG9ydCB7IEdhbWVib2FyZCB9IGZyb20gXCIuL2dhbWVib2FyZFwiXHJcblxyXG5jb25zdCBQbGF5ZXIgPSAocGxheWVydHlwZSkgPT4ge1xyXG4gICAgY29uc3QgdHlwZSA9IHBsYXllcnR5cGU7XHJcblxyXG4gICAgY29uc3QgZ2FtZWJvYXJkID0gR2FtZWJvYXJkKHBsYXllcnR5cGUpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBnYW1lYm9hcmRcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtQbGF5ZXJ9XHJcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XHJcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL3BsYXllclwiO1xyXG5pbXBvcnQgeyByZW5kZXJQbGF5ZXJHYW1lYm9hcmQsIHJlbmRlckNvbXBHYW1lYm9hcmQgfSBmcm9tIFwiLi9VSVwiO1xyXG5cclxubGV0IHBsYXllckdhbWVib2FyZFxyXG5mdW5jdGlvbiBwbGF5R2FtZSAoKSB7IFxyXG4gICAgY29uc3QgcGxheWVyQm9hcmRCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZWJvYXJkLW9uZScpO1xyXG4gICAgY29uc3QgY29tcHV0ZXJCb2FyZEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lYm9hcmQtdHdvJyk7XHJcblxyXG4gICAgY29uc3QgcmVhbFBsYXllciA9IFBsYXllcignWW91Jyk7XHJcbiAgICBjb25zdCBjb21wUGxheWVyID0gUGxheWVyKCdDb21wdXRlcicpO1xyXG5cclxuICAgIGNvbnN0IGZvdXJTaGlwID0gU2hpcCg0KVxyXG4gICAgY29uc3QgdGhyZWVTaGlwT25lID0gU2hpcCgzKTtcclxuICAgIGNvbnN0IHRocmVlU2hpcFR3byA9IFNoaXAoMyk7XHJcbiAgICBjb25zdCB0d29TaGlwT25lID0gU2hpcCgyKTtcclxuICAgIGNvbnN0IHR3b1NoaXBUd28gPSBTaGlwKDIpO1xyXG4gICAgY29uc3QgdHdvU2hpcFRocmVlID0gU2hpcCgyKTtcclxuICAgIGNvbnN0IG9uZVNoaXBPbmUgPSBTaGlwKDEpO1xyXG4gICAgY29uc3Qgb25lU2hpcFR3byA9IFNoaXAoMSk7XHJcbiAgICBjb25zdCBvbmVTaGlwVGhyZWUgPSBTaGlwKDEpO1xyXG4gICAgY29uc3Qgb25lU2hpcEZvdXIgPSBTaGlwKDEpO1xyXG5cclxuICAgIGNvbnN0IGZvdXJTaGlwQ29tcCA9IFNoaXAoNClcclxuICAgIGNvbnN0IHRocmVlU2hpcE9uZUNvbXAgPSBTaGlwKDMpO1xyXG4gICAgY29uc3QgdGhyZWVTaGlwVHdvQ29tcCA9IFNoaXAoMyk7XHJcbiAgICBjb25zdCB0d29TaGlwT25lQ29tcCA9IFNoaXAoMik7XHJcbiAgICBjb25zdCB0d29TaGlwVHdvQ29tcCA9IFNoaXAoMik7XHJcbiAgICBjb25zdCB0d29TaGlwVGhyZWVDb21wID0gU2hpcCgyKTtcclxuICAgIGNvbnN0IG9uZVNoaXBPbmVDb21wID0gU2hpcCgxKTtcclxuICAgIGNvbnN0IG9uZVNoaXBUd29Db21wID0gU2hpcCgxKTtcclxuICAgIGNvbnN0IG9uZVNoaXBUaHJlZUNvbXAgPSBTaGlwKDEpO1xyXG4gICAgY29uc3Qgb25lU2hpcEZvdXJDb21wID0gU2hpcCgxKTtcclxuXHJcbiAgICBjb25zdCBzaGlwcyA9IFtmb3VyU2hpcCwgdGhyZWVTaGlwT25lLCB0aHJlZVNoaXBUd28sIHR3b1NoaXBPbmUsdHdvU2hpcFR3bywgdHdvU2hpcFRocmVlLCBvbmVTaGlwT25lLCBvbmVTaGlwVHdvLCBvbmVTaGlwVGhyZWUsIG9uZVNoaXBGb3VyXVxyXG5cclxuICAgIGNvbnN0IHNoaXBzQ29tcCA9IFtmb3VyU2hpcENvbXAsIHRocmVlU2hpcE9uZUNvbXAsIHRocmVlU2hpcFR3b0NvbXAsIHR3b1NoaXBPbmVDb21wLHR3b1NoaXBUd29Db21wLCB0d29TaGlwVGhyZWVDb21wLCBvbmVTaGlwT25lQ29tcCwgb25lU2hpcFR3b0NvbXAsIG9uZVNoaXBUaHJlZUNvbXAsIG9uZVNoaXBGb3VyQ29tcF1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRSYW5kb21TdHJpbmcoc3RyaW5nMSwgc3RyaW5nMikge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpIDwgMC41ID8gc3RyaW5nMSA6IHN0cmluZzI7XHJcbiAgICB9XHJcblxyXG4gICAgLy9SZW5kZXJzIGFsbCBzaGlwcyBidXQgdGhlIHNoaXBzIHRvdWNoIGVhY2ggb3RoZXIgb24gdGhlIGJvYXJkIFxyXG4gICAgLy9OZWVkIHRvIHVwZGF0ZSBwbGFjZVNoaXBcclxuICAgIGZ1bmN0aW9uIHJlbmRlclNoaXAoZ2FtZWJvYXJkLHNoaXBzKSB7XHJcbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbCA9ICdob3Jpem9udGFsJztcclxuICAgICAgICBjb25zdCB2ZXJ0aWNhbCA9ICd2ZXJ0aWNhbCc7XHJcbiAgICAgICAgXHJcbiAgICBcclxuICAgICAgICBzaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzaGlwUGxhY2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHdoaWxlICghc2hpcFBsYWNlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG9yaWVudGF0aW9uID0gZ2V0UmFuZG9tU3RyaW5nKGhvcml6b250YWwsIHZlcnRpY2FsKTtcclxuICAgICAgICAgICAgICAgIGxldCBjb2wgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7IFxyXG4gICAgICAgICAgICAgICAgbGV0IHJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTsgXHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gZ2FtZWJvYXJkLmdhbWVib2FyZC5wbGFjZVNoaXAoY29sLCByb3csIHNoaXAsIG9yaWVudGF0aW9uKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGlwUGxhY2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgcmVuZGVyU2hpcChyZWFsUGxheWVyLHNoaXBzKTtcclxuICAgIHJlbmRlclNoaXAoY29tcFBsYXllciwgc2hpcHNDb21wKVxyXG4gICAgLy8gcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDAsMCwgZm91clNoaXAsICdob3Jpem9udGFsJyk7XHJcbiAgICAvLyByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoOSw2LCB0aHJlZVNoaXBPbmUsICdob3Jpem9udGFsJyk7XHJcbiAgICAvLyByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoMCw5LCB0aHJlZVNoaXBUd28sICd2ZXJ0aWNhbCcpO1xyXG4gICAgLy8gcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDgsMCwgdHdvU2hpcE9uZSwgJ2hvcml6b250YWwnKTtcclxuICAgIC8vIHJlYWxQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg1LDQsIHR3b1NoaXBUd28sICd2ZXJ0aWNhbCcpO1xyXG4gICAgLy8gcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDIsNiwgdHdvU2hpcFRocmVlLCAnaG9yaXpvbnRhbCcpO1xyXG4gICAgLy8gcmVhbFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDgsNCwgb25lU2hpcE9uZSwgJ2hvcml6b250YWwnKTtcclxuICAgIC8vIHJlYWxQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCgyLDIsIG9uZVNoaXBUd28sICdob3Jpem9udGFsJyk7XHJcbiAgICAvLyByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoNiw4LCBvbmVTaGlwVGhyZWUsICdob3Jpem9udGFsJyk7XHJcbiAgICAvLyByZWFsUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoNSwwLCBvbmVTaGlwRm91ciwgJ2hvcml6b250YWwnKTtcclxuXHJcbiAgICAvLyBjb21wUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoMCwwLCBmb3VyU2hpcCwgJ2hvcml6b250YWwnKTtcclxuICAgIC8vIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg5LDYsIHRocmVlU2hpcE9uZSwgJ2hvcml6b250YWwnKTtcclxuICAgIC8vIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCgwLDksIHRocmVlU2hpcFR3bywgJ3ZlcnRpY2FsJyk7XHJcbiAgICAvLyBjb21wUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoOCwwLCB0d29TaGlwT25lLCAnaG9yaXpvbnRhbCcpO1xyXG4gICAgLy8gY29tcFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDUsNCwgdHdvU2hpcFR3bywgJ3ZlcnRpY2FsJyk7XHJcbiAgICAvLyBjb21wUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoMiw2LCB0d29TaGlwVGhyZWUsICdob3Jpem9udGFsJyk7XHJcbiAgICAvLyBjb21wUGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoOCw0LCBvbmVTaGlwT25lLCAnaG9yaXpvbnRhbCcpO1xyXG4gICAgLy8gY29tcFBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKDIsMiwgb25lU2hpcFR3bywgJ2hvcml6b250YWwnKTtcclxuICAgIC8vIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg3LDgsIG9uZVNoaXBUaHJlZSwgJ2hvcml6b250YWwnKTtcclxuICAgIC8vIGNvbXBQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcCg1LDAsIG9uZVNoaXBGb3VyLCAnaG9yaXpvbnRhbCcpO1xyXG5cclxuXHJcbiAgICBwbGF5ZXJHYW1lYm9hcmQgPSByZW5kZXJQbGF5ZXJHYW1lYm9hcmQocmVhbFBsYXllciwgcGxheWVyQm9hcmRCb3gpO1xyXG4gICAgcmVuZGVyQ29tcEdhbWVib2FyZChjb21wUGxheWVyLCBjb21wdXRlckJvYXJkQm94KVxyXG5cclxuICAgIHBsYXllckdhbWVib2FyZC5yZW5kZXIoKTtcclxuXHJcbn1cclxuXHJcblxyXG5leHBvcnQge1xyXG4gICAgcGxheWVyR2FtZWJvYXJkLFxyXG4gICAgcGxheUdhbWVcclxufVxyXG4iLCJpbXBvcnQgeyBwbGF5R2FtZSB9IGZyb20gXCIuL2dhbWVcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICBwbGF5R2FtZSgpXG59KSJdLCJuYW1lcyI6WyJTaGlwIiwic2hpcExlbmd0aCIsImhpdHMiLCJoaXQiLCJpc1N1bmsiLCJsZW5ndGgiLCJnZXRIaXRzIiwiR2FtZWJvYXJkIiwicGxheWVyIiwiZ2FtZWJvYXJkIiwiZ2FtZUJvYXJkIiwiaSIsImoiLCJjcmVhdGVHYW1lQm9hcmQiLCJzaGlwcyIsIl9pc1dpdGhpbkJvdW5kcyIsImluZGV4IiwiX2NoZWNrQ2VsbHNBcm91bmQiLCJjb2wiLCJyb3ciLCJuZWlnaGJvdXJzIiwidmFsdWUiLCJjaGVja0VuZEdhbWUiLCJjb3VudGVyIiwic2hpcCIsImNvbnNvbGUiLCJsb2ciLCJsb3NlciIsIm1vZGFsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwib3ZlcmxheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJsb2NhdGlvbiIsInJlbG9hZCIsIm9wZW5Nb2RhbCIsInRleHRDb250ZW50IiwicmVtb3ZlIiwicGxhY2VTaGlwIiwiZGlyZWN0aW9uIiwidHlwZSIsInB1c2giLCJyZWNlaXZlQXR0YWNrIiwiYm9hcmRDZWxsIiwidW5kZWZpbmVkIiwiX21hcmtDZWxsc0Fyb3VuZFN1Y2NzZXNzZnVsbEhpdCIsIlBsYXllciIsInBsYXllcnR5cGUiLCJwbGF5ZXJHYW1lYm9hcmQiLCJwbGF5ZXJCb2FyZEJveCIsImNvbXB1dGVyQm9hcmRCb3giLCJyZWFsUGxheWVyIiwiY29tcFBsYXllciIsImZvdXJTaGlwIiwidGhyZWVTaGlwT25lIiwidGhyZWVTaGlwVHdvIiwidHdvU2hpcE9uZSIsInR3b1NoaXBUd28iLCJ0d29TaGlwVGhyZWUiLCJvbmVTaGlwT25lIiwib25lU2hpcFR3byIsIm9uZVNoaXBUaHJlZSIsIm9uZVNoaXBGb3VyIiwic2hpcHNDb21wIiwicmVuZGVyU2hpcCIsImZvckVhY2giLCJzaGlwUGxhY2VkIiwib3JpZW50YXRpb24iLCJNYXRoIiwicmFuZG9tIiwiZmxvb3IiLCJib3giLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwicmVuZGVyIiwic3F1YXJlIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJhcHBlbmQiLCJhdHRhY2siLCJhdHRlbXB0IiwiY29sUmFuZG9tIiwicm93UmFuZG9tIiwic2V0VGltZW91dCIsInJlbmRlclBsYXllckdhbWVib2FyZCIsInJlbmRlckNvbXBHYW1lYm9hcmQiLCJwbGF5R2FtZSJdLCJzb3VyY2VSb290IjoiIn0=