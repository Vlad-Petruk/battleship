(()=>{"use strict";const e=()=>{const e=function(){const e=[];for(let o=0;o<=9;o++){e[o]=[];for(let n=0;n<=9;n++)e[o][n]=""}return e}(),o=[];function n(e){return!(e<0||e>9)}return{gameboard:e,placeShip:function(t,a,r,l){if(!n(t)||!n(a)||""!==e[t][a])return console.log("Index out of board");if("vertical"===l&&n(t+r.length-1))for(let n=t;n<t+r.length;n++){if(""!==e[n][a])return console.log("Invalid spot");e[n][a]={type:`${r.length}ship`,ship:r,value:"O",isSunk:!1},o.push(e[n][a])}if("horizontal"===l&&n(a+r.length-1))for(let n=a;n<a+r.length;n++){if(""!==e[t][n])return console.log("Invalid spot");e[t][n]={type:`${r.length}ship`,ship:r,value:"O",isSunk:!1},o.push(e[t][n])}return e},receiveAttack:function(o,t){if(!n(o)||!n(t))return console.log("Attack out of board");{let n=e[o][t];if("·"===n)return;""===n?(e[o][t]="·",console.log("Miss")):"O"===n.value&&(n.ship.hit(),n.value="X",n.ship.isSunk()&&(n.isSunk=!0,function(o,n){const t=[e[o+1]?.[n],e[o-1]?.[n],e[o]?.[n+1],e[o]?.[n-1],e[o+1]?.[n+1],e[o-1]?.[n-1],e[o-1]?.[n+1],e[o+1]?.[n-1]];for(let a=0;a<t.length;a++)if(void 0!==t[a]&&"O"!==t[a].value&&"X"!==t[a].value)switch(t[a]="·",a){case 0:e[o+1][n]="·";break;case 1:e[o-1][n]="·";break;case 2:e[o][n+1]="·";break;case 3:e[o][n-1]="·";break;case 4:e[o+1][n+1]="·";break;case 5:e[o-1][n-1]="·";break;case 6:e[o-1][n+1]="·";break;case 7:e[o+1][n-1]="·"}}(o,t),console.log("Sunk")),console.log(n.isSunk))}},checkEndGame:function(){let e=0;for(let n of o)!0===n.isSunk&&e++;console.log(e),e>=10&&console.log("End game")}}},o=o=>({type:o,gameboard:e()});document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".gameboard-one"),n=(document.querySelector(".gameboard-two"),document.querySelector(".header"),o("human"));o("computer"),function(e,o){const n=document.createElement("div");n.classList.add("container");for(let o=0;o<e.gameboard.gameboard.length;o++)for(let t=0;t<e.gameboard.gameboard[o].length;t++){const a=document.createElement("div");a.innerHTML=e.gameboard.gameboard[o][t],n.appendChild(a)}o.append(n)}(n,e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQU9DLFVBQVlQLEVBQU9uQyxVQUFVQSxVQUFVRSxHQUFHQyxHQUNqRGtDLEVBQVVNLFlBQVlGLEVBQ3RCLENBRUpMLEVBQUlRLE9BQU9QLEVBQ2YsQ0RKSVEsQ0FBZ0JYLEVBQVlGLEVBQWMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9VSS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuXG5jb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG4gIGZ1bmN0aW9uIGNyZWF0ZUdhbWVCb2FyZCgpIHtcbiAgICBjb25zdCBnYW1lQm9hcmQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSA5OyBpKyspIHtcbiAgICAgIGdhbWVCb2FyZFtpXSA9IFtdO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gOTsgaisrKSB7XG4gICAgICAgIGdhbWVCb2FyZFtpXVtqXSA9IFwiXCI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBnYW1lQm9hcmQ7XG4gIH1cblxuICBjb25zdCBnYW1lYm9hcmQgPSBjcmVhdGVHYW1lQm9hcmQoKTtcbiAgY29uc3Qgc2hpcHMgPSBbXTtcblxuICBmdW5jdGlvbiBfaXNXaXRoaW5Cb3VuZHMoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gOSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvL3N0YXJ0IGFuZCBlbmQgaGVyZSAtIGluZGV4ZXMgb2YgdGhlIGJvcmQncyBjZWxscyB3aGVyZSBpIHdhbnQgdG8gcGxhY2Ugc2hpcFxuICAvLyB0aGUgY29vcmRpbmF0ZSBvYmplY3Qgc2hvdWxkIGhhdmUgYSByZWZlcmVuY2UgdG8gdGhlIHNoaXAgaW4gaXRzIGxvY2F0aW9uLlxuICBmdW5jdGlvbiBwbGFjZVNoaXAoY29sLCByb3csIHNoaXAsIGRpcmVjdGlvbikge1xuICAgIGlmIChcbiAgICAgIF9pc1dpdGhpbkJvdW5kcyhjb2wpICYmXG4gICAgICBfaXNXaXRoaW5Cb3VuZHMocm93KSAmJlxuICAgICAgZ2FtZWJvYXJkW2NvbF1bcm93XSA9PT0gXCJcIlxuICAgICkge1xuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiICYmIF9pc1dpdGhpbkJvdW5kcyhjb2wgKyBzaGlwLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBjb2w7IGkgPCBjb2wgKyBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGdhbWVib2FyZFtpXVtyb3ddID09PSBcIlwiKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmRbaV1bcm93XSA9IHtcbiAgICAgICAgICAgICAgdHlwZTogYCR7c2hpcC5sZW5ndGh9c2hpcGAsXG4gICAgICAgICAgICAgIHNoaXA6IHNoaXAsXG4gICAgICAgICAgICAgIHZhbHVlOiBcIk9cIixcbiAgICAgICAgICAgICAgaXNTdW5rOiBmYWxzZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzaGlwcy5wdXNoKGdhbWVib2FyZFtpXVtyb3ddKTtcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuIGNvbnNvbGUubG9nKFwiSW52YWxpZCBzcG90XCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgZGlyZWN0aW9uID09PSBcImhvcml6b250YWxcIiAmJlxuICAgICAgICBfaXNXaXRoaW5Cb3VuZHMocm93ICsgc2hpcC5sZW5ndGggLSAxKVxuICAgICAgKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSByb3c7IGkgPCByb3cgKyBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGdhbWVib2FyZFtjb2xdW2ldID09PSBcIlwiKSB7XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sXVtpXSA9IHtcbiAgICAgICAgICAgICAgdHlwZTogYCR7c2hpcC5sZW5ndGh9c2hpcGAsXG4gICAgICAgICAgICAgIHNoaXA6IHNoaXAsXG4gICAgICAgICAgICAgIHZhbHVlOiBcIk9cIixcbiAgICAgICAgICAgICAgaXNTdW5rOiBmYWxzZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzaGlwcy5wdXNoKGdhbWVib2FyZFtjb2xdW2ldKTtcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuIGNvbnNvbGUubG9nKFwiSW52YWxpZCBzcG90XCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZyhcIkluZGV4IG91dCBvZiBib2FyZFwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2FtZWJvYXJkO1xuICB9XG5cbiAgLy9DdXJyZW50bHkgdGVzdGluZyB0aGlzIGluIGluZGV4LmpzXG4gIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2soY29sLCByb3cpIHtcbiAgICBpZiAoX2lzV2l0aGluQm91bmRzKGNvbCkgJiYgX2lzV2l0aGluQm91bmRzKHJvdykpIHtcbiAgICAgIGxldCBib2FyZENlbGwgPSBnYW1lYm9hcmRbY29sXVtyb3ddO1xuICAgICAgaWYgKGJvYXJkQ2VsbCA9PT0gXCLCt1wiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSBpZiAoYm9hcmRDZWxsID09PSBcIlwiKSB7XG4gICAgICAgIGdhbWVib2FyZFtjb2xdW3Jvd10gPSBcIsK3XCI7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc1wiKTtcbiAgICAgIH0gZWxzZSBpZiAoYm9hcmRDZWxsLnZhbHVlID09PSBcIk9cIikge1xuICAgICAgICBib2FyZENlbGwuc2hpcC5oaXQoKTtcbiAgICAgICAgYm9hcmRDZWxsLnZhbHVlID0gXCJYXCI7XG4gICAgICAgIGlmIChib2FyZENlbGwuc2hpcC5pc1N1bmsoKSkge1xuICAgICAgICAgIGJvYXJkQ2VsbC5pc1N1bmsgPSB0cnVlO1xuICAgICAgICAgIF9tYXJrQ2VsbHNBcm91bmRTdWNjc2Vzc2Z1bGxIaXQoY29sLCByb3cpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3Vua1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhib2FyZENlbGwuaXNTdW5rKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKFwiQXR0YWNrIG91dCBvZiBib2FyZFwiKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfbWFya0NlbGxzQXJvdW5kU3VjY3Nlc3NmdWxsSGl0KGNvbCwgcm93KSB7XG4gICAgY29uc3QgbmVpZ2hib3VycyA9IFtcbiAgICAgIGdhbWVib2FyZFtjb2wgKyAxXT8uW3Jvd10sXG4gICAgICBnYW1lYm9hcmRbY29sIC0gMV0/Lltyb3ddLFxuICAgICAgZ2FtZWJvYXJkW2NvbF0/Lltyb3cgKyAxXSxcbiAgICAgIGdhbWVib2FyZFtjb2xdPy5bcm93IC0gMV0sXG4gICAgICBnYW1lYm9hcmRbY29sICsgMV0/Lltyb3cgKyAxXSxcbiAgICAgIGdhbWVib2FyZFtjb2wgLSAxXT8uW3JvdyAtIDFdLFxuICAgICAgZ2FtZWJvYXJkW2NvbCAtIDFdPy5bcm93ICsgMV0sXG4gICAgICBnYW1lYm9hcmRbY29sICsgMV0/Lltyb3cgLSAxXSxcbiAgICBdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZWlnaGJvdXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIG5laWdoYm91cnNbaV0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBuZWlnaGJvdXJzW2ldLnZhbHVlICE9PSBcIk9cIiAmJlxuICAgICAgICBuZWlnaGJvdXJzW2ldLnZhbHVlICE9PSBcIlhcIlxuICAgICAgKSB7XG4gICAgICAgIG5laWdoYm91cnNbaV0gPSBcIsK3XCI7XG4gICAgICAgIC8vIFVwZGF0ZSBjb3JyZXNwb25kaW5nIHZhbHVlIGluIGdhbWVib2FyZCBhcnJheVxuICAgICAgICBzd2l0Y2ggKGkpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sICsgMV1bcm93XSA9IFwiwrdcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgLSAxXVtyb3ddID0gXCLCt1wiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgZ2FtZWJvYXJkW2NvbF1bcm93ICsgMV0gPSBcIsK3XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBnYW1lYm9hcmRbY29sXVtyb3cgLSAxXSA9IFwiwrdcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgKyAxXVtyb3cgKyAxXSA9IFwiwrdcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgLSAxXVtyb3cgLSAxXSA9IFwiwrdcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgLSAxXVtyb3cgKyAxXSA9IFwiwrdcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIGdhbWVib2FyZFtjb2wgKyAxXVtyb3cgLSAxXSA9IFwiwrdcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrRW5kR2FtZSgpIHtcbiAgICBsZXQgY291bnRlciA9IDA7XG4gICAgZm9yIChsZXQgc2hpcCBvZiBzaGlwcykge1xuICAgICAgaWYgKHNoaXAuaXNTdW5rID09PSB0cnVlKSB7XG4gICAgICAgIGNvdW50ZXIrKztcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coY291bnRlcik7XG4gICAgaWYgKGNvdW50ZXIgPj0gMTApIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRW5kIGdhbWVcIik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnYW1lYm9hcmQsXG4gICAgcGxhY2VTaGlwLFxuICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgY2hlY2tFbmRHYW1lLFxuICB9O1xufTtcblxuZXhwb3J0IHsgR2FtZWJvYXJkIH07XG4iLCJpbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIlxyXG5cclxuY29uc3QgUGxheWVyID0gKHBsYXllcnR5cGUpID0+IHtcclxuICAgIGNvbnN0IHR5cGUgPSBwbGF5ZXJ0eXBlO1xyXG5cclxuICAgIGNvbnN0IGdhbWVib2FyZCA9IEdhbWVib2FyZCgpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBnYW1lYm9hcmRcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtQbGF5ZXJ9IiwiaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vcGxheWVyXCI7XG5pbXBvcnQgeyByZW5kZXJHYW1lYm9hcmQgfSBmcm9tIFwiLi9VSVwiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgIGNvbnN0IHBsYXllckJvYXJkQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWVib2FyZC1vbmUnKTtcbiAgICBjb25zdCBjb21wdXRlckJvYXJkQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWVib2FyZC10d28nKTtcbiAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyk7XG5cbiAgICBjb25zdCByZWFsUGxheWVyID0gUGxheWVyKCdodW1hbicpO1xuICAgIGNvbnN0IGNvbXBQbGF5ZXIgPSBQbGF5ZXIoJ2NvbXB1dGVyJyk7XG5cbiAgICByZW5kZXJHYW1lYm9hcmQocmVhbFBsYXllciwgcGxheWVyQm9hcmRCb3gpXG5cbn0pO1xuXG5cblxuLy8gY29uc29sZS5sb2cocmVhbFBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkKVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuLy8gY29uc3QgbXlTaGlwID0gU2hpcCg0KTtcbi8vIGNvbnN0IGFub3RoZXJTaGlwID0gU2hpcCgyKTtcbi8vIGNvbnN0IGJpZ1NoaXAgPSBTaGlwKDQpO1xuLy8gY29uc3QgbmV3Qm9hcmQgPSBHYW1lYm9hcmQoKTtcbi8vIG5ld0JvYXJkLnBsYWNlU2hpcCgwLCAwLCBteVNoaXAsIFwidmVydGljYWxcIik7XG4vLyBuZXdCb2FyZC5wbGFjZVNoaXAoMiwgMiwgYW5vdGhlclNoaXAsIFwiaG9yaXpvbnRhbFwiKTtcbi8vIG5ld0JvYXJkLnBsYWNlU2hpcCg5LCA2LCBiaWdTaGlwLCBcImhvcml6b250YWxcIik7XG5cbi8vIC8vIG5ld0JvYXJkLnJlY2VpdmVBdHRhY2soMCwwKVxuLy8gLy8gbmV3Qm9hcmQucmVjZWl2ZUF0dGFjaygxLDApXG4vLyAvLyBuZXdCb2FyZC5yZWNlaXZlQXR0YWNrKDIsMClcblxuLy8gbmV3Qm9hcmQucmVjZWl2ZUF0dGFjaygyLCAyKTtcbi8vIG5ld0JvYXJkLnJlY2VpdmVBdHRhY2soMiwgMyk7XG5cbi8vIG5ld0JvYXJkLnJlY2VpdmVBdHRhY2soOSwgNyk7XG5cbi8vIGNvbnNvbGUubG9nKG5ld0JvYXJkLmdhbWVib2FyZCk7XG4iLCJpbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcclxuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vcGxheWVyXCI7XHJcbmltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XHJcblxyXG5cclxuZnVuY3Rpb24gcmVuZGVyR2FtZWJvYXJkIChwbGF5ZXIsIGJveCkge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyJylcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBsYXllci5nYW1lYm9hcmQuZ2FtZWJvYXJkW2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgLy8gICBjb25zb2xlLmxvZyhwbGF5ZXIuZ2FtZWJvYXJkLmdhbWVib2FyZFtpXVtqXSlcclxuICAgICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBzcXVhcmUuaW5uZXJIVE1MID0gcGxheWVyLmdhbWVib2FyZC5nYW1lYm9hcmRbaV1bal07XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNxdWFyZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYm94LmFwcGVuZChjb250YWluZXIpXHJcbn1cclxuXHJcbmV4cG9ydCB7cmVuZGVyR2FtZWJvYXJkfSJdLCJuYW1lcyI6WyJHYW1lYm9hcmQiLCJnYW1lYm9hcmQiLCJnYW1lQm9hcmQiLCJpIiwiaiIsImNyZWF0ZUdhbWVCb2FyZCIsInNoaXBzIiwiX2lzV2l0aGluQm91bmRzIiwiaW5kZXgiLCJwbGFjZVNoaXAiLCJjb2wiLCJyb3ciLCJzaGlwIiwiZGlyZWN0aW9uIiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsInR5cGUiLCJ2YWx1ZSIsImlzU3VuayIsInB1c2giLCJyZWNlaXZlQXR0YWNrIiwiYm9hcmRDZWxsIiwiaGl0IiwibmVpZ2hib3VycyIsInVuZGVmaW5lZCIsIl9tYXJrQ2VsbHNBcm91bmRTdWNjc2Vzc2Z1bGxIaXQiLCJjaGVja0VuZEdhbWUiLCJjb3VudGVyIiwiUGxheWVyIiwicGxheWVydHlwZSIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXllckJvYXJkQm94IiwicXVlcnlTZWxlY3RvciIsInJlYWxQbGF5ZXIiLCJwbGF5ZXIiLCJib3giLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic3F1YXJlIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJhcHBlbmQiLCJyZW5kZXJHYW1lYm9hcmQiXSwic291cmNlUm9vdCI6IiJ9